# 52.文件字节流


1. FileInputStream的常用方法有哪些？
  1. read();读数据,可以一个个读,也可以用字符数组一次性读入
  1. available();看看还有几个字节的数据在等待我们读取
  1. close();关闭文件(无论怎样最后都要记得关闭)
2. FileOutputStream的常用方法有哪些？.
  1. write();写数据,可以一个个写,也可以用字符数组一次性写入
  1. flush();刷新缓冲区
  1. close();关闭文件(无论怎样最后都要记得关闭)

如何根据IO流来进行读写文件?<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560132946667-0697cd3e-8db2-4d7f-80be-748f502b6713.png#align=left&display=inline&height=185&name=image.png&originHeight=370&originWidth=475&size=136051&status=done&width=237.5)<br />可以看出,这个类数据源是我们文件的输入流

打开API,先找到<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560133058392-ae138ef5-528b-4d57-8595-988a2c9e29bc.png#align=left&display=inline&height=244&name=image.png&originHeight=487&originWidth=471&size=131101&status=done&width=235.5)<br />方法<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560133140018-43bd39d2-7b83-4a1a-869e-07621608cdec.png#align=left&display=inline&height=517&name=image.png&originHeight=1033&originWidth=1811&size=565885&status=done&width=905.5)<br />第二个第三个read都是读到我们字节数组中来

实例<br />首先要在数据源和应用程序之间搭建管道<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560133230571-fa9c315a-153a-4da3-9e4b-ddba548e84ba.png#align=left&display=inline&height=70&name=image.png&originHeight=139&originWidth=1196&size=167897&status=done&width=598) <br />这里会有一个异常,我们先把这个异常给抛上去,一会儿再去处理这个异常<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560133267895-c9069e54-534c-453b-b7fb-a7e1b3b3bfe1.png#align=left&display=inline&height=36&name=image.png&originHeight=71&originWidth=1032&size=103331&status=done&width=516)<br />2.<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560133363896-fef2147e-910c-46b8-b541-1e09a9d74247.png#align=left&display=inline&height=55&name=image.png&originHeight=110&originWidth=620&size=80008&status=done&width=310)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560133384317-78cf5020-802c-4e99-9e6d-95fa3bd4b332.png#align=left&display=inline&height=157&name=image.png&originHeight=314&originWidth=460&size=78227&status=done&width=230)![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560133411513-2457a67c-abbd-49c0-925e-063883e96047.png#align=left&display=inline&height=52&name=image.png&originHeight=104&originWidth=242&size=27625&status=done&width=121)<br />3.0<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560133433711-88e07241-0552-4af2-8766-3eb8dee8a929.png#align=left&display=inline&height=49&name=image.png&originHeight=97&originWidth=565&size=59784&status=done&width=282.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560133459430-e3b2ac2f-1ead-4419-9fd9-875de78ff5c1.png#align=left&display=inline&height=46&name=image.png&originHeight=91&originWidth=769&size=80340&status=done&width=384.5)<br />已经读了1一个,还有5个在等待我们读取(这个是估算的)<br />我们不能每次都看读没读完,那如何知道我们已经读完了呢?<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560133593954-e6267203-51c8-4a97-8e6b-edb2f515d3eb.png#align=left&display=inline&height=271&name=image.png&originHeight=541&originWidth=1947&size=255739&status=done&width=973.5)<br />直接判断返回的是否是-1,就<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560133683421-bdff24d0-0d88-41e7-8a1f-96c1e5108906.png#align=left&display=inline&height=100&name=image.png&originHeight=200&originWidth=625&size=113456&status=done&width=312.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560133770022-9b9e03cd-63ec-4213-8781-bbeaa10b16e9.png#align=left&display=inline&height=209&name=image.png&originHeight=418&originWidth=1136&size=483022&status=done&width=568)

法二读取<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560133888399-a1545827-f115-4ffb-9039-b3f0d7dcccda.png#align=left&display=inline&height=33&name=image.png&originHeight=66&originWidth=835&size=66359&status=done&width=417.5)<br />它的构造方法可以是file对象,也可以是去传String类型的一个路径<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560133942313-7a83e35f-e9b1-4452-ae8f-cf56dc178bed.png#align=left&display=inline&height=31&name=image.png&originHeight=62&originWidth=434&size=43170&status=done&width=217)<br />中转站:1024的整数倍(就像水杯一样)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560133971085-5a000af0-27a3-4679-abb3-5135532a66c8.png#align=left&display=inline&height=442&name=image.png&originHeight=883&originWidth=1978&size=571418&status=done&width=989)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560134048827-47234f5c-98f8-40f9-a5ff-aa655b04d6b9.png#align=left&display=inline&height=107&name=image.png&originHeight=214&originWidth=765&size=142141&status=done&width=382.5)

用单个字节要读六次才能读完,但是用数组就只用读一次了,明显减少了访问磁盘的次数,效率明显提高

小结<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560134212860-e3e06e22-b6fd-40dd-a754-5fc41e8ff6fb.png#align=left&display=inline&height=176&name=image.png&originHeight=352&originWidth=553&size=122731&status=done&width=276.5)


字节输出流<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560134246488-a8fdd1f0-94f6-44d9-b60a-e599a86d8e89.png#align=left&display=inline&height=158&name=image.png&originHeight=316&originWidth=571&size=122289&status=done&width=285.5)<br />也是一次性可以写一个字节,或者把字节数组中的数一次性写进<br />flush:刷新缓冲区<br />实例1<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560134329769-6a3f1fa0-db67-47eb-8fb1-59ff2716fe1d.png#align=left&display=inline&height=121&name=image.png&originHeight=241&originWidth=922&size=162199&status=done&width=461)<br />但发现有异常,我们现在来处理这个异常(IO异常)<br />把这两句代码选中<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560134388106-4ff371cb-20da-4495-b403-8fbcf55ae418.png#align=left&display=inline&height=74&name=image.png&originHeight=148&originWidth=1081&size=153833&status=done&width=540.5)<br />然后按alt+shift+Z添加trycatch<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560134416137-a77c8f48-b484-4fc2-b015-b17525a63933.png#align=left&display=inline&height=76&name=image.png&originHeight=151&originWidth=424&size=65604&status=done&width=212)<br />注意程序是否产生异常,最后我们都要关闭<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560134458619-50e7ce93-a39a-4150-8108-c4b04fd6dbc5.png#align=left&display=inline&height=77&name=image.png&originHeight=153&originWidth=303&size=39859&status=done&width=151.5)<br />关闭的时候依旧有异常,我们继续处理<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560134504177-0017002f-69a8-476f-b168-8e03727f7031.png#align=left&display=inline&height=78&name=image.png&originHeight=155&originWidth=513&size=78530&status=done&width=256.5)<br />现在fos仍然报错<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560134541808-cd24d332-e95e-4b9a-b7e3-7fc87ed04193.png#align=left&display=inline&height=49&name=image.png&originHeight=97&originWidth=756&size=59018&status=done&width=378)<br />很明显是没有初始化,那么直接在顶端初始化就好了<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560134581350-048a8d49-d538-4743-b1ea-567d422f8efc.png#align=left&display=inline&height=260&name=image.png&originHeight=519&originWidth=830&size=338215&status=done&width=415)<br />如是,我们还要在关闭的时候判断一下是否为空,不然会产生空指针异常<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560134634564-cbca5cd1-2372-4e9c-9d77-58c159828aa3.png#align=left&display=inline&height=96&name=image.png&originHeight=191&originWidth=425&size=60218&status=done&width=212.5)<br />完整代码:<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560134661647-5ec4e6b9-9956-4f95-acbc-c031eaa5dffe.png#align=left&display=inline&height=308&name=image.png&originHeight=615&originWidth=745&size=366189&status=done&width=372.5)

一次写多个字节<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560134724934-366a4ec5-b92b-482e-b686-26e282c10802.png#align=left&display=inline&height=28&name=image.png&originHeight=55&originWidth=609&size=50892&status=done&width=304.5)<br />字符串的getBytes方法可以得到一个字节数组,再把这个字节数组中数据写进数据<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560134784279-dc37e87f-b53d-444a-95d7-1100bc781b7f.png#align=left&display=inline&height=41&name=image.png&originHeight=82&originWidth=588&size=60255&status=done&width=294)<br />就写进去了<br />但注意这是对源文件的一个覆盖<br />如果是想对原来的文件最佳,那就在最开始的布尔类型设置为true<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560134840578-8953bac3-a572-4388-98e2-c938e434a1fd.png#align=left&display=inline&height=83&name=image.png&originHeight=166&originWidth=863&size=127603&status=done&width=431.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560134856522-f3b7c24d-f0c1-4611-83f4-730b4fea91c8.png#align=left&display=inline&height=26&name=image.png&originHeight=51&originWidth=801&size=52621&status=done&width=400.5)<br />小结<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560135040552-11f25c7e-c9e6-479d-8362-955732ed926f.png#align=left&display=inline&height=151&name=image.png&originHeight=301&originWidth=603&size=105565&status=done&width=301.5)





