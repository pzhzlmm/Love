# 55.缓冲字节流_缓冲字符流

 

1. 缓冲字节流的特点是什么？
  1. 读写的时候设定了一个缓冲区,在文件内容读写进程序之前先在这个缓冲区进行中转
2. 简述使用缓冲字节流进行文件复制时提高效率的原理是什么？
  1. 读文件和写文件都使用了缓冲区**(**byte数组，8192字节**)**,减少了读写次数,从而提高了效率

![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138171752-f9275b39-2fcb-4852-a73f-2e2e87d5df75.png#align=left&display=inline&height=197&name=image.png&originHeight=394&originWidth=735&size=154269&status=done&width=367.5)<br />作用是提高缓冲效率<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138197918-9cd66879-57d9-42af-876a-947163070138.png#align=left&display=inline&height=54&name=image.png&originHeight=109&originWidth=720&size=49936&status=done&width=360)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138213223-9cb4c272-5a89-4667-8468-294e2e2bcdc6.png#align=left&display=inline&height=51&name=image.png&originHeight=102&originWidth=739&size=62577&status=done&width=369.5)<br />流程<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138240954-eaf92478-4871-4da2-8b8e-87c98dcaac96.png#align=left&display=inline&height=69&name=image.png&originHeight=137&originWidth=260&size=48107&status=done&width=130)<br />用数组实现(关闭顺序与创建对象顺组相反)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138311917-fce0cc0b-9c2e-4c96-bec5-b87931c09675.png#align=left&display=inline&height=198&name=image.png&originHeight=396&originWidth=1119&size=313759&status=done&width=559.5)<br />看看时间<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138358429-62a1652d-4eff-4988-bde1-0c3b05533bea.png#align=left&display=inline&height=126&name=image.png&originHeight=253&originWidth=843&size=209378&status=done&width=421.5)<br />我们这时候使用缓冲流提高效率<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138400159-387b4f69-b17b-4a4e-ba35-23ba5c1cc1e4.png#align=left&display=inline&height=58&name=image.png&originHeight=116&originWidth=867&size=111939&status=done&width=433.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138428441-7879a399-4fc5-4cea-b819-242131c28803.png#align=left&display=inline&height=54&name=image.png&originHeight=107&originWidth=519&size=57960&status=done&width=259.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138495917-d8b7c2e1-0421-4bfa-a04c-2add099c7b27.png#align=left&display=inline&height=60&name=image.png&originHeight=119&originWidth=762&size=79218&status=done&width=381)<br />缓冲流就是高层流,因此关闭它两即可<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138534525-d7e469cb-42df-4db2-9d90-fed0250fe668.png#align=left&display=inline&height=33&name=image.png&originHeight=65&originWidth=224&size=26069&status=done&width=112)<br />运行程序可见<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138552151-2d9ff9c2-c313-4e1f-9926-1802467e238f.png#align=left&display=inline&height=24&name=image.png&originHeight=47&originWidth=349&size=24425&status=done&width=174.5)<br />比字节流块一倍

那么为什么会快一倍呢?<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138961997-097b663e-88a0-4d70-90ac-7c4b5ebbfdf6.png#align=left&display=inline&height=104&name=image.png&originHeight=207&originWidth=733&size=136921&status=done&width=366.5)<br />读取源码分析:<br />当我们去创建缓冲流对象的时候<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138634886-7ef416a0-ca2b-4ba0-9a95-afacddf894d3.png#align=left&display=inline&height=48&name=image.png&originHeight=96&originWidth=728&size=72841&status=done&width=364)<br />调用了个本类的构造方法<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138659337-2bc9d7f3-53f1-44df-b752-96e8a2e869f7.png#align=left&display=inline&height=18&name=image.png&originHeight=36&originWidth=706&size=39964&status=done&width=353)<br />因此当我们创建这个对象的时候<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138694459-f1b2fe3a-eb31-45f2-ad29-b3d19614095a.png#align=left&display=inline&height=114&name=image.png&originHeight=227&originWidth=1011&size=157116&status=done&width=505.5)<br />它是给我们创建了一个长度为8192的byte类型的数组

写入源码分析:<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138761033-556ff93f-4898-47aa-bfda-8fb86a7084bd.png#align=left&display=inline&height=46&name=image.png&originHeight=91&originWidth=770&size=65246&status=done&width=385)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138769286-55a5297b-6c5d-42e6-95ee-beebb11fbb84.png#align=left&display=inline&height=117&name=image.png&originHeight=234&originWidth=1008&size=156043&status=done&width=504)<br />读写的时候实际上是去访问缓冲区<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138922093-c23583ec-a89b-4034-a62e-a39e92b7d94d.png#align=left&display=inline&height=147&name=image.png&originHeight=294&originWidth=1003&size=125746&status=done&width=501.5)

手动刷新<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560139004783-e4813417-8d5e-429d-9126-08d6d4b2c00e.png#align=left&display=inline&height=71&name=image.png&originHeight=142&originWidth=714&size=108923&status=done&width=357)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560138990125-d1feccdc-c083-4446-8fca-0befa20379b3.png#align=left&display=inline&height=123&name=image.png&originHeight=246&originWidth=574&size=161168&status=done&width=287)


缓冲字符流<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560139031761-2f3497d8-af75-431a-a69f-ea8f43aea505.png#align=left&display=inline&height=160&name=image.png&originHeight=320&originWidth=609&size=115352&status=done&width=304.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560139158448-d45c12c3-e158-4bba-8805-b647c46a8b41.png#align=left&display=inline&height=210&name=image.png&originHeight=420&originWidth=1044&size=308733&status=done&width=522)<br />处理异常关闭流,处理关闭的异常,初始化

什么时候用字节流什么时候用字符流?<br />如果是纯文本文件的话我们就可以使用字符流来提高读写效率<br />其他的都可以使用字节流来完成
