# 63.设计模式_装饰器模式

<a name="752le"></a>
## 导问
1. 什么是装饰设计模式？举例描述
  1. 对原有的类进行包装修饰,通过对象之间的关联关系来代替继承关系,使其具备更强悍的功能,又不会产生更多的子类
2. 装饰模式的实现细节及优缺点？
  1. 优点:1.扩展对象功能,比继承更加灵活,不会导致类个数急剧增加2.可以对一个对象进行多次修饰,创建出不同行为的组合,从而得到更加强大的对象.3.具体构建类和装饰类可以独立变化,用户可以根据需要自己增加新的具体构建子类的装饰子类
  1. 缺点:产生很多小对象,大量小对象占据内存,一定程度上影响性能.装饰模式容易出错,调试排查比较麻烦


为什么需要装饰设计模式?<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560150668445-514c325d-46c0-4fdb-999e-8d59dae5fd0f.png#align=left&display=inline&height=134&name=image.png&originHeight=267&originWidth=764&size=191774&status=done&width=382)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560150677612-86ede69f-9d2f-4bf1-b6a4-677299f15e4b.png#align=left&display=inline&height=164&name=image.png&originHeight=327&originWidth=580&size=107288&status=done&width=290)<br />如果子类增加,我们又要对这个情况去不断排列组合,就会造成子类非常庞大<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560150792569-267303b1-5388-4fdd-be51-5dd4414043b4.png#align=left&display=inline&height=313&name=image.png&originHeight=626&originWidth=1176&size=707318&status=done&width=588)

![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560150853553-9518a95e-212a-4367-be9a-b0e7e053833b.png#align=left&display=inline&height=151&name=image.png&originHeight=302&originWidth=737&size=127010&status=done&width=368.5)<br />ICar 接口<br />Car汽车<br />剩下无论飞行,潜水,亦或AI,都是我Car的一个装饰<br />SuperCar持有对ICar的引用,对Car可以进行装饰上各种功能,这样会比继承更灵活,而且不会导致子类个数的急剧增长<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560150997855-ffaf8d6f-3281-4e96-8013-d532fb5c8c0b.png#align=left&display=inline&height=71&name=image.png&originHeight=141&originWidth=703&size=94556&status=done&width=351.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560151007159-37b552c9-4d10-4a13-bdc3-093aad9414e6.png#align=left&display=inline&height=44&name=image.png&originHeight=88&originWidth=727&size=61164&status=done&width=363.5)

代码实现<br />先编写接口<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560151043051-03e87daa-f235-42ee-8696-1e93b69573d3.png#align=left&display=inline&height=113&name=image.png&originHeight=226&originWidth=556&size=93302&status=done&width=278)<br />再编写具体角色<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560151059561-97d5731f-2358-4bdc-a32b-4101dede50f4.png#align=left&display=inline&height=135&name=image.png&originHeight=269&originWidth=783&size=153172&status=done&width=391.5)<br />接下来是装饰角色,装饰角色要拥有对抽象角色的一个引用<br />通过构造方法将其引入,把局部变量的值赋给成员变量<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560151212925-18fea534-3d86-4218-b5eb-320a5d25a3e3.png#align=left&display=inline&height=198&name=image.png&originHeight=395&originWidth=724&size=188927&status=done&width=362)<br />再调用真实角色的行驶方法<br />编写一个具体的装饰器角色<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560151389969-cdead33e-1b5e-4f82-a179-49831fd17c35.png#align=left&display=inline&height=210&name=image.png&originHeight=419&originWidth=785&size=219657&status=done&width=392.5)<br />再去编写潜水<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560151418269-9ac433c1-28e1-49f5-9649-231efed4699e.png#align=left&display=inline&height=217&name=image.png&originHeight=433&originWidth=761&size=311718&status=done&width=380.5)<br />AICar<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560151445729-6873e6c1-db25-46ef-84c2-12b0815cc3fb.png#align=left&display=inline&height=200&name=image.png&originHeight=399&originWidth=975&size=256441&status=done&width=487.5)<br />测试类<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560151518080-553de1aa-d8b0-45c9-b468-b11ff0569578.png#align=left&display=inline&height=276&name=image.png&originHeight=552&originWidth=922&size=303273&status=done&width=461)<br />继续增加功能(把fly汽车传入进去)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560151573261-131a34db-adcd-4806-b827-96c04a1b956f.png#align=left&display=inline&height=250&name=image.png&originHeight=499&originWidth=1030&size=295690&status=done&width=515)<br />以上代码可以简写为<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560151627848-d80f222e-7807-4de1-9e5d-beabb84b5d3d.png#align=left&display=inline&height=37&name=image.png&originHeight=73&originWidth=712&size=57223&status=done&width=356)<br />我们可以任意进行组合,从而增加我Car的功能<br />我的若干Car都是对我的Car起装饰作用的<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560151749583-a90b0b5f-50c0-4e95-8196-4625d7f842c5.png#align=left&display=inline&height=75&name=image.png&originHeight=150&originWidth=710&size=102482&status=done&width=355)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560151761453-6611abb5-057e-42de-9356-6a78d773eb8f.png#align=left&display=inline&height=187&name=image.png&originHeight=373&originWidth=757&size=205564&status=done&width=378.5)<br />如:很多小对象,不好调错<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560151793855-63a4218b-0258-439c-8b20-29621952d86d.png#align=left&display=inline&height=57&name=image.png&originHeight=113&originWidth=1007&size=107635&status=done&width=503.5)

![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560151842665-3c41f05e-1c06-42fe-88e7-a872715b2f38.png#align=left&display=inline&height=201&name=image.png&originHeight=401&originWidth=745&size=224475&status=done&width=372.5)<br />如<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560151868729-ef508457-08d6-453c-877e-092ef19f7800.png#align=left&display=inline&height=39&name=image.png&originHeight=78&originWidth=379&size=25128&status=done&width=189.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560151917567-b98017e7-b865-4cba-b91e-1cae0e752c8c.png#align=left&display=inline&height=24&name=image.png&originHeight=47&originWidth=1310&size=76586&status=done&width=655)
