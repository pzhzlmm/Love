# 119.DOM4J解析XML配置文件

Entity实体类的编写<br />Mapping实体类的编写<br />解析XML文件

这是我们的xml<br />多个路径去访问共享资源,它的名称是相同的,只是url路径是不相同的<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560400119483-6217aebb-8758-421d-b00c-eb5a7478407b.png#align=left&display=inline&height=247&name=image.png&originHeight=494&originWidth=1117&size=358259&status=done&width=558.5)<br />所以可以编写成这样<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560400144107-4fd01aa9-e410-49fc-b33d-d52b628d2901.png#align=left&display=inline&height=225&name=image.png&originHeight=449&originWidth=1142&size=314717&status=done&width=571)<br />现在就是同一个名称可以有多个路径去访问<br />其名称映射的就是我们所请求的名字<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560408106417-47714edf-5a27-47a3-b2e7-3ee683819a5d.png#align=left&display=inline&height=209&name=image.png&originHeight=418&originWidth=950&size=315503&status=done&width=475)

先编写实体类,即<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560408129848-5d2297ad-ff56-487d-a9d9-176f68cfc33b.png#align=left&display=inline&height=112&name=image.png&originHeight=224&originWidth=1137&size=174478&status=done&width=568.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560408154806-951ca1b6-7813-4d55-b016-827399491b12.png#align=left&display=inline&height=232&name=image.png&originHeight=463&originWidth=1064&size=310271&status=done&width=532)<br />私有属性,添加公有的 取值赋值方法<br />添加构造方法带参无参构造<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560408186019-9c29ff9e-0b56-41c7-9124-13b7cef54a20.png#align=left&display=inline&height=74&name=image.png&originHeight=148&originWidth=686&size=72558&status=done&width=343)

接下来编写映射关系,即mapping<br />名称是一个,用string就可以,但我们有N多条路径,即pattern会有很多,就用一个集合表示(里面的内容仍是String类型)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560408348091-fa5789ca-f5f0-417a-b051-b6f4f900046c.png#align=left&display=inline&height=297&name=image.png&originHeight=594&originWidth=839&size=338437&status=done&width=419.5)<br />私有属性,添加公有的 取值赋值方法<br />添加构造方法带参无参构造<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560408385598-81ad1ea5-28d6-4f62-82c8-c7c18b99e078.png#align=left&display=inline&height=126&name=image.png&originHeight=252&originWidth=859&size=140761&status=done&width=429.5)


接下来要做的就是解析XML<br />要考虑,xml中的servlet肯定不止一个,所以仍然用集合表示<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560408524497-51a3fede-7876-4a9c-9afc-5bc430d47770.png#align=left&display=inline&height=17&name=image.png&originHeight=34&originWidth=491&size=28339&status=done&width=245.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560408530939-5dfea57f-1d9c-42f6-b771-e09029c90df3.png#align=left&display=inline&height=22&name=image.png&originHeight=44&originWidth=904&size=53071&status=done&width=452)<br />里面还会有N多映射关系,所以<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560408570877-ee324dd4-4b48-4eb6-8353-e2cb87d692ac.png#align=left&display=inline&height=17&name=image.png&originHeight=34&originWidth=525&size=36621&status=done&width=262.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560408587260-65d2b718-38ac-4baa-8f32-71ffc11e50fe.png#align=left&display=inline&height=26&name=image.png&originHeight=51&originWidth=1559&size=120809&status=done&width=779.5)<br />私有属性,添加公有的 取值赋值方法<br />添加构造方法<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560408650919-db2762f7-ebda-4969-b996-6b4f8f004c59.png#align=left&display=inline&height=352&name=image.png&originHeight=704&originWidth=1175&size=600086&status=done&width=587.5)<br />把jar包添加进来,开始解析<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560408762353-b8f5dc67-9bae-4306-a8f1-3be8e3d8075f.png#align=left&display=inline&height=112&name=image.png&originHeight=224&originWidth=909&size=156042&status=done&width=454.5)<br />处理异常<br />完整<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560408796108-e61ca7ab-cfc8-4c2d-abf5-1176c9f853d7.png#align=left&display=inline&height=196&name=image.png&originHeight=391&originWidth=941&size=242509&status=done&width=470.5)


开始解析<br />给parse一个document对象让它解析<br />1首先 是获取根元素<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560409512636-69e869d5-7b9b-4200-9ff2-0e95a73e1a89.png#align=left&display=inline&height=51&name=image.png&originHeight=102&originWidth=841&size=89836&status=done&width=420.5)<br />2接着要![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560409010670-98d53845-5293-425c-9d5e-a200abbc602d.png#align=left&display=inline&height=22&name=image.png&originHeight=43&originWidth=247&size=20762&status=done&width=123.5)<br />用![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560409045117-9b732ca9-78f4-4ca1-a7d3-60a6b691c35e.png#align=left&display=inline&height=24&name=image.png&originHeight=47&originWidth=499&size=40533&status=done&width=249.5)获取servlet子元素,获取到的 结果是一个![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560409074867-86fbc666-8308-449a-a13a-ed3f5a3fea48.png#align=left&display=inline&height=18&name=image.png&originHeight=35&originWidth=131&size=10289&status=done&width=65.5)类型,然后判断是否有下一个(是否 有元素),如果有就 将元素取出<br />取出 的每一个都是一个element类型,得到servlet下面还有<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560409202904-bcd8df03-7181-4c03-b595-a45e56815f16.png#align=left&display=inline&height=83&name=image.png&originHeight=165&originWidth=758&size=111768&status=done&width=379)<br />因此我们还要得到这两个子元素<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560409443193-9ea06e91-9d14-4423-a71f-cdd556eef8a9.png#align=left&display=inline&height=289&name=image.png&originHeight=578&originWidth=1848&size=927080&status=done&width=924)<br />由此循环,我们的Entity就有值了,把它再放到集合当中<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560409492347-eec74345-909e-4dea-a5f4-6fbd5b1d465a.png#align=left&display=inline&height=34&name=image.png&originHeight=67&originWidth=308&size=36564&status=done&width=154)<br />这样子我们的servlet就解析完成了<br />可以测试一下<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560409553771-3b994207-d8f4-48e2-aa0b-2919bac25320.png#align=left&display=inline&height=63&name=image.png&originHeight=125&originWidth=1004&size=98798&status=done&width=502)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560409571469-d065e627-d33e-4576-b913-52931144a6cd.png#align=left&display=inline&height=78&name=image.png&originHeight=155&originWidth=692&size=95985&status=done&width=346)<br />结果<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560409578915-6d6ff97f-915d-466c-a028-2edb2d690828.png#align=left&display=inline&height=58&name=image.png&originHeight=115&originWidth=607&size=73025&status=done&width=303.5)


接下来开始解析![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560409622609-0c65d1fe-b277-49f2-94e2-4a3987dcfa8b.png#align=left&display=inline&height=21&name=image.png&originHeight=42&originWidth=234&size=14144&status=done&width=117)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560409758608-e91f1500-70b8-49ba-a3ee-b44983ab591e.png#align=left&display=inline&height=265&name=image.png&originHeight=529&originWidth=1258&size=505658&status=done&width=629)<br />测试<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560409788603-f73d1b9a-be7b-43ae-b898-e3507039bade.png#align=left&display=inline&height=117&name=image.png&originHeight=233&originWidth=565&size=114040&status=done&width=282.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560409795204-7381baca-97ca-4694-8621-ea3123300108.png#align=left&display=inline&height=88&name=image.png&originHeight=176&originWidth=171&size=31662&status=done&width=85.5)
