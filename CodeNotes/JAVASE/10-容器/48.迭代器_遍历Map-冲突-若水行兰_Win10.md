# 48.迭代器_遍历Map


1. ListIterator接口比Iterator扩展的哪些方法？
  1. 可以对元素进行增删(解决了并发修改异常),也可以逆序遍历
  1. 可以对元素进行增删(解决了并发修改异常),也可以逆序遍历ListIterator接口是Iterator接口的扩展，可以用于并发修改异常hasPrevious();判断是否有前一个previous();获取前一个元素nextIndex();获取下一个索引previousIndex();获取前一个索引set(E e);设置元素add(E e);添加一个元素。
2. 并发修改异常是如何产生的？
  1. 正在遍历元素的时候又对其中的元素进行增删,两个地方指向同一个数组,编译器就凌乱不知道该怎么处理了


这课主要是学习用迭代器遍历Map接口<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560065156951-418a7f72-8ec8-4425-a5ad-7128d5305ef9.png#align=left&display=inline&height=212&name=image.png&originHeight=424&originWidth=804&size=247184&status=done&width=402)<br />结果报错<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560065199935-64a0b51b-4877-4ea2-8e25-45921eb691d6.png#align=left&display=inline&height=119&name=image.png&originHeight=239&originWidth=1251&size=287469&status=done&width=625.5)<br />错误分析<br />在我们使用迭代器遍历的时候,又使用了集合对象对数组中的数据进行添加<br />即<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560065364378-0500ec31-1a25-4e3f-ba3b-62331385def8.png#align=left&display=inline&height=222&name=image.png&originHeight=443&originWidth=868&size=261140&status=done&width=434)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560065524394-97c37695-e5d1-492a-a4f3-5a1a2f1fd780.png#align=left&display=inline&height=190&name=image.png&originHeight=380&originWidth=1033&size=186482&status=done&width=516.5)<br />也就是说这个数组此时有两个引用去指向<br />而正在遍历的时候又去添加元素,编译器就凌乱了

解决这个问题方法<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560065630682-f5255e8c-1bee-4c1f-a0a2-2880630b432c.png#align=left&display=inline&height=196&name=image.png&originHeight=391&originWidth=449&size=178256&status=done&width=224.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560065642224-8a87f058-ab76-4c3b-819b-628a02ba73cc.png#align=left&display=inline&height=45&name=image.png&originHeight=90&originWidth=677&size=74855&status=done&width=338.5)<br />得到的是ListItr接口的一个实例,再找这个是什么<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560065746202-acf68c6c-a3df-469d-84ea-e3d1a13a3caa.png#align=left&display=inline&height=131&name=image.png&originHeight=262&originWidth=1039&size=169532&status=done&width=519.5)<br />观察里面方法我们可以说,listIterator是iterator接口的一个拓展<br />不仅可以正向遍历元素,还可以逆向遍历元素<br />因而我们现在改下刚刚的方法就可以执行了<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560065939310-e2c5557f-6b00-4655-a621-2525cefd056b.png#align=left&display=inline&height=113&name=image.png&originHeight=225&originWidth=823&size=124752&status=done&width=411.5)<br />记得使用迭代器自己的添加方法<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560065975715-73d4a733-f7c5-4199-9fc8-bd4a7eca6d4b.png#align=left&display=inline&height=38&name=image.png&originHeight=75&originWidth=743&size=59406&status=done&width=371.5),可以用于并发修改异常

使用迭代器去遍历Map集合<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560066215172-83390f8f-d367-4105-8911-f3b61bca80a8.png#align=left&display=inline&height=82&name=image.png&originHeight=163&originWidth=970&size=138236&status=done&width=485)<br />第一种方法:获取所有键的集合,然后再根据键去获取值<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560066279997-7a30b460-5aae-4c47-96e0-3d120244d4a0.png#align=left&display=inline&height=79&name=image.png&originHeight=158&originWidth=727&size=92116&status=done&width=363.5)<br />第二种,遍历键值关系<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560066373241-75559a89-d3b7-4e25-a48b-c49fbc6e00dc.png#align=left&display=inline&height=82&name=image.png&originHeight=164&originWidth=912&size=171875&status=done&width=456)<br />类似于key是妻子,值是丈夫,entry是结婚证,可以获得丈夫的,也可以获得妻子的

Entry,一个接口,被定义在了Map里的<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1560066443795-d0cd123e-b0b9-4137-b945-2814eeba01ee.png#align=left&display=inline&height=199&name=image.png&originHeight=397&originWidth=810&size=296120&status=done&width=405)<br />是一个接口,被定义在了Map这个集合之中<br />里面有getKey和getValue的方法,因此可以调用它
