# 35.ArrayList_JDK源码分析_2


1. ArrayList中的add方法的执行过程是什么？
  1. 首先判断添加的索引是否超出边界，空间是否够用（不够用要扩容）
  1. 接着就是用到了数组的拷贝，把原数组拷贝到原数组+1的位置，其实就是把索引开始的位置依次后移一位得出一个空来
  1. 再把要插入的数据放在索引位置处即可
  1. 然后存储数组个数的size加一
2. ArrayList中set和get的方法的作用及执行过程？
  1. set：设置索引对应元素的值，检查一下索引值然后根据这个索引值在数组中获取一个元素对象
  1. set：取出索引对应元素的值，检查一下索引值然后根据这个索引值在数组中得到一个元素对象

![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559959692746-0614d7e0-37bf-4e18-abe4-1e6afb91d58e.png#align=left&display=inline&height=220&name=image.png&originHeight=440&originWidth=395&size=87566&status=done&width=197.5)<br />例<br />add<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960002621-cdf4aedd-06ce-4103-9bc4-337df2612a65.png#align=left&display=inline&height=21&name=image.png&originHeight=42&originWidth=469&size=28890&status=done&width=234.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559959747705-ac6b70ba-0602-48d0-aafd-a9b43ba85def.png#align=left&display=inline&height=94&name=image.png&originHeight=189&originWidth=689&size=153658&status=done&width=344.5)<br />生成<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559959758133-84d70332-966b-40a1-a55a-5690bd944cf3.png#align=left&display=inline&height=23&name=image.png&originHeight=45&originWidth=342&size=28128&status=done&width=171)<br />源码分析<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559959795124-80039729-44db-4396-8554-514f4a4dc145.png#align=left&display=inline&height=123&name=image.png&originHeight=246&originWidth=917&size=188109&status=done&width=458.5)<br />再检测容量是否够用（和前面一句增加代码健壮性）<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559959822414-1f30b184-6a30-4a4a-a04d-d96cce00a96c.png#align=left&display=inline&height=26&name=image.png&originHeight=52&originWidth=914&size=51320&status=done&width=457)<br />再进行一个数组拷贝<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559959859476-96a38849-a3b1-45c5-8602-a3ceb72afaf5.png#align=left&display=inline&height=34&name=image.png&originHeight=67&originWidth=956&size=71203&status=done&width=478)<br />原始数组，原始数组当中的拷贝位置，size即拷贝过来的长度，<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960069070-234484d5-3a19-476c-b473-253f235da476.png#align=left&display=inline&height=60&name=image.png&originHeight=119&originWidth=944&size=107032&status=done&width=472)<br />即<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559959956882-5545b9cc-f132-4f4e-869d-718ffd2cc8d7.png#align=left&display=inline&height=237&name=image.png&originHeight=474&originWidth=1273&size=664866&status=done&width=636.5)<br />再把java放到索引为0的地方<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960078193-1a473f63-948b-469d-8196-42e970c3759f.png#align=left&display=inline&height=38&name=image.png&originHeight=75&originWidth=861&size=68123&status=done&width=430.5)

get<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960089565-1ebf10e6-e64b-41ce-93d7-00e60009f7bd.png#align=left&display=inline&height=26&name=image.png&originHeight=51&originWidth=505&size=36778&status=done&width=252.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960144524-086208f6-aaf7-4166-8416-c778dd9acb9d.png#align=left&display=inline&height=82&name=image.png&originHeight=164&originWidth=565&size=74631&status=done&width=282.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960178329-c5f73beb-7991-4129-a370-438c9a4e37cb.png#align=left&display=inline&height=63&name=image.png&originHeight=125&originWidth=665&size=69997&status=done&width=332.5)<br />省略健壮性代码完整版即<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960233909-d2dbd5d9-dc45-4778-99be-d573c6e1d9c5.png#align=left&display=inline&height=151&name=image.png&originHeight=301&originWidth=1032&size=199370&status=done&width=516)

size<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960282124-500e87ec-625f-439b-b21d-d2fd39ddbfe4.png#align=left&display=inline&height=57&name=image.png&originHeight=114&originWidth=620&size=56160&status=done&width=310)

isEmpty<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960301663-07718653-6447-4047-8ad0-dd7605cff074.png#align=left&display=inline&height=69&name=image.png&originHeight=138&originWidth=819&size=87371&status=done&width=409.5)

set<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960404513-23dfbe46-9590-4f6c-b338-2abe34884c20.png#align=left&display=inline&height=109&name=image.png&originHeight=218&originWidth=786&size=123472&status=done&width=393)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960447959-2d365ece-6538-4488-9fd2-d186f384d1dd.png#align=left&display=inline&height=58&name=image.png&originHeight=115&originWidth=578&size=70191&status=done&width=289)然后赋给oldValue<br />再把新的元素设置到对应索引的位置上<br />再返回oldValue<br />例<br />原是![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960573118-ffe44f90-18cf-4e8d-a7a5-ccfa2ad44c3c.png#align=left&display=inline&height=18&name=image.png&originHeight=36&originWidth=350&size=18031&status=done&width=175)现执行<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960554711-01f0565e-cdaa-4647-94b9-a3d25a220458.png#align=left&display=inline&height=23&name=image.png&originHeight=45&originWidth=610&size=44514&status=done&width=305)<br />变为java hello sql，将输出world<br />完整<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960668691-0dba4a28-4c9f-4958-9cd3-11a786d34070.png#align=left&display=inline&height=138&name=image.png&originHeight=276&originWidth=1014&size=174987&status=done&width=507)

remove<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960716064-3afdf688-1fd2-4e4e-9bde-2f3f0aeb2e72.png#align=left&display=inline&height=211&name=image.png&originHeight=422&originWidth=1085&size=245603&status=done&width=542.5)<br />假设，删除索引为1的元素<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960855515-f773ffa2-349c-405b-a492-a69b51c04544.png#align=left&display=inline&height=338&name=image.png&originHeight=675&originWidth=1476&size=713380&status=done&width=738)<br />完整<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960907813-d9e4519a-1653-4b11-bd73-9d9caff53ad0.png#align=left&display=inline&height=244&name=image.png&originHeight=488&originWidth=1126&size=256142&status=done&width=563)

clear<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559960918769-1806dbe1-f6e4-48df-956f-24043dd20528.png#align=left&display=inline&height=146&name=image.png&originHeight=292&originWidth=600&size=104261&status=done&width=300)<br />所有元素都设置成空了，即一个元素都没有了，那么这个数组就相当于被清空了

interator<br />迭代器<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559961023210-ebd17dc8-9f2d-4052-ad35-5f0f5afc1f4e.png#align=left&display=inline&height=52&name=image.png&originHeight=104&originWidth=559&size=48826&status=done&width=279.5)<br />可以看出返回的是一个接口类型<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559961080747-70ff55b0-54bb-4037-88fc-ba02a0e9566c.png#align=left&display=inline&height=18&name=image.png&originHeight=36&originWidth=111&size=7234&status=done&width=55.5)接口的一个实现类<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559961274280-01f0fe3f-c56a-4b22-bb0b-c5c5c5df6ad9.png#align=left&display=inline&height=434&name=image.png&originHeight=867&originWidth=1485&size=948864&status=done&width=742.5)<br />执行功能是把所有元素打印输出<br />基本原理就是看现在的cursor与集合的size是否相等，不相等的话就说明还没有到最后，然后把这个元素取出，cursor加1，直到把所有元素取出为止


