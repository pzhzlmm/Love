# 36.LinkedList的特点链表JDK源码分析

1. LinkedList集合的特点是什么？
  1. 查询效率低，增删效率高，线程不安全。
2. LinedList底层所采用的数据结构是什么？
  1. 双向链表


<br />这里讲的是另外一个实现类，其使用和ArrayList几乎相同<br />导入这个包![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559961612103-0eabc223-37ad-40c3-8c5a-7fd7bd8688e8.png#align=left&display=inline&height=23&name=image.png&originHeight=46&originWidth=530&size=22485&status=done&width=265)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559961769655-f5efb24a-37f4-4a0e-8718-2b945a47f46e.png#align=left&display=inline&height=262&name=image.png&originHeight=524&originWidth=394&size=163999&status=done&width=197)<br />后面还有几个ArrayList也有的一系列方法且是相同的

![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559961843905-d14fb9f4-df3c-4ec5-b792-a9a8c0433b5f.png#align=left&display=inline&height=16&name=image.png&originHeight=31&originWidth=174&size=7883&status=done&width=87)<br />前面有C说明这是个静态类<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559961898725-ae61345f-6717-4c02-871a-6c1861473bac.png#align=left&display=inline&height=171&name=image.png&originHeight=342&originWidth=546&size=140090&status=done&width=273)<br />之所以会有这个是因为LinkedList的底层数据结构是个链表<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559961976200-bc0d9808-9e2d-4631-8b6c-74acde2d0204.png#align=left&display=inline&height=62&name=image.png&originHeight=124&originWidth=920&size=102597&status=done&width=460)

单向链表<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962010015-8926c908-19c5-492f-804c-817229bae75b.png#align=left&display=inline&height=193&name=image.png&originHeight=385&originWidth=643&size=81636&status=done&width=321.5)<br />最后一个元素是没有下个节点的，因此就为空<br />如果删除元素直接指向下一个就好，就不需要大量地添加亦或是移动元素了<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962076701-d2daca67-b790-4abe-817c-d3ec1eda1b0b.png#align=left&display=inline&height=112&name=image.png&originHeight=223&originWidth=599&size=74753&status=done&width=299.5)

双向链表<br />第一个链表是没有前驱指针的，最后一个链表是没有后续指针的<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962174453-f28e0a80-ee1a-47d6-8e3d-b34c834c8d32.png#align=left&display=inline&height=210&name=image.png&originHeight=419&originWidth=678&size=100226&status=done&width=339)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962231329-8907bf75-2562-4f21-a8ca-deee37b1955a.png#align=left&display=inline&height=185&name=image.png&originHeight=369&originWidth=793&size=148731&status=done&width=396.5)

接下来分析<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962255752-5d735fdd-a371-4365-897f-c863d104cc55.png#align=left&display=inline&height=287&name=image.png&originHeight=574&originWidth=402&size=79979&status=done&width=201)

无参构造方法<br />创建的是一个空的list<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962362226-87f92d87-6f51-455b-ba71-a21efbebe98c.png#align=left&display=inline&height=94&name=image.png&originHeight=187&originWidth=551&size=48825&status=done&width=275.5)<br />即啥都没做

add<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962334551-186d8434-2671-43a1-98d4-05a26f05216f.png#align=left&display=inline&height=83&name=image.png&originHeight=166&originWidth=656&size=91965&status=done&width=328)<br />添加的时候调用的是liskLast<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962405985-1ec599bd-5b55-41f3-a305-8857a495b769.png#align=left&display=inline&height=73&name=image.png&originHeight=145&originWidth=566&size=49316&status=done&width=283)<br />再进入linkLast<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962433121-dd13a890-45e7-4404-86bb-87d1cceb0596.png#align=left&display=inline&height=172&name=image.png&originHeight=343&originWidth=815&size=145004&status=done&width=407.5)<br />第一行，再进入last<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962467492-baba381e-405b-4ca5-bc6f-d20fdfbb2691.png#align=left&display=inline&height=27&name=image.png&originHeight=54&originWidth=380&size=21768&status=done&width=190)last是一个节点，这时候为空<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962657696-bb4d39f3-3810-4b56-a7f4-c4570c30c6e2.png#align=left&display=inline&height=17&name=image.png&originHeight=33&originWidth=367&size=16910&status=done&width=183.5)即![](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962493099-0f4bf452-483c-46d0-bb52-931b2b4eb3e6.png#align=left&display=inline&height=84&originHeight=168&originWidth=305&status=done&width=152)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962586521-25c408ea-18d3-4e22-aedb-eddfa6f41cd8.png#align=left&display=inline&height=29&name=image.png&originHeight=57&originWidth=364&size=17988&status=done&width=182)创建了一个新的节点，前驱是l，元素 本身是e，本身是没有后继的<br />即![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962673796-071dcc3c-b132-45b4-abca-db7e907e4d53.png#align=left&display=inline&height=90&name=image.png&originHeight=179&originWidth=348&size=26617&status=done&width=174)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962746380-259280a0-4bad-40b3-a9dd-59374eaf390b.png#align=left&display=inline&height=20&name=image.png&originHeight=40&originWidth=254&size=11334&status=done&width=127)然后last就指向了刚刚创建好的新节点

![](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962778285-07f3c944-9e04-436a-9f4c-8e99f9c69c8c.png#align=left&display=inline&height=134&originHeight=268&originWidth=333&status=done&width=166)<br />再看l是空么，<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962846040-ca556b36-d2c0-4083-971f-44fc5c0acf4f.png#align=left&display=inline&height=40&name=image.png&originHeight=79&originWidth=503&size=27919&status=done&width=251.5)<br />这时候first也指向了前驱结点<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962901632-6498800d-5945-4add-9aa3-a6dad0c6680a.png#align=left&display=inline&height=175&name=image.png&originHeight=351&originWidth=334&size=36639&status=done&width=167)<br />接着l结点就被释放了<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559962980744-39a8e4c1-b18e-4a98-886b-711471aed0ec.png#align=left&display=inline&height=170&name=image.png&originHeight=340&originWidth=720&size=53118&status=done&width=360)


现在再使用一下这个方法![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559973773832-ad491a71-7d7a-403c-b9a7-32ba1c0aba31.png#align=left&display=inline&height=26&name=image.png&originHeight=53&originWidth=386&size=31177&status=done&width=193)<br />又调用了这个方法![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559973789445-d448d4a2-ff19-42dd-a331-d65e6c4ccbc0.png#align=left&display=inline&height=59&name=image.png&originHeight=117&originWidth=539&size=57609&status=done&width=269.5)

![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559973801664-938ded05-5f71-4aaa-baa3-ba17cd837d8e.png#align=left&display=inline&height=181&name=image.png&originHeight=361&originWidth=861&size=150763&status=done&width=430.5)<br />先把头结点给了f<br />后又创了个结点newNode，前驱为空，内容为java，后续结点为刚刚设置的f（原前驱结点）<br />当前结构如下<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559973977758-a2df169d-3b46-45b1-8428-6f217a616ecf.png#align=left&display=inline&height=192&name=image.png&originHeight=383&originWidth=743&size=56882&status=done&width=371.5)<br />然后又让原头结点的first指向新的头结点<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559974043662-f917429b-8a05-4a49-8573-70cc6e2cb5e1.png#align=left&display=inline&height=200&name=image.png&originHeight=399&originWidth=825&size=62262&status=done&width=412.5)<br />然后判断f是否为空，如果为空的话把尾结点指向新节点<br />不为空则把头结点指向新节点![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559974248568-f516a802-e752-42e1-bd7a-bca33f3cfce0.png#align=left&display=inline&height=24&name=image.png&originHeight=47&originWidth=303&size=13011&status=done&width=151.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559974203026-1c8b906a-446a-42f6-b771-b13b5482c56c.png#align=left&display=inline&height=208&name=image.png&originHeight=415&originWidth=857&size=61175&status=done&width=428.5)<br />执行完后，f没有了，newNode也没有了，只剩下这样的双向链表<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559974317917-a2f8a10c-b970-4965-bb44-92926f40306a.png#align=left&display=inline&height=149&name=image.png&originHeight=298&originWidth=709&size=44087&status=done&width=354.5)


刚刚是添头，现在来试试添尾![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559974346904-2b0165fc-883b-4811-a133-625989a2fa6a.png#align=left&display=inline&height=22&name=image.png&originHeight=43&originWidth=340&size=29223&status=done&width=170)<br />这次我们调用的是linkLast<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559974377039-0ada5642-8f29-426b-b9dc-47f95a5555d8.png#align=left&display=inline&height=46&name=image.png&originHeight=92&originWidth=519&size=46983&status=done&width=259.5)<br />源码如下<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559974391812-b1954768-5531-486e-9412-7167acccafa6.png#align=left&display=inline&height=173&name=image.png&originHeight=345&originWidth=818&size=140559&status=done&width=409)<br />先创建了个l指向尾结点，再创个新节点，令前驱为l，元素值为传入的world，没有尾结点<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559974598417-d665e6e5-c1c5-4db2-9601-a1e63304b62c.png#align=left&display=inline&height=183&name=image.png&originHeight=366&originWidth=1019&size=76407&status=done&width=509.5)<br />接着把last赋给了newNode<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559974638770-236b0aca-ba68-423a-8ae0-bb962779794a.png#align=left&display=inline&height=197&name=image.png&originHeight=393&originWidth=1014&size=79795&status=done&width=507)<br />然后l不为空，让它的下个节点赋给新添加的那个位置<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559974717903-912d9039-f060-489f-9534-4ef00beee4e8.png#align=left&display=inline&height=197&name=image.png&originHeight=393&originWidth=1108&size=74909&status=done&width=554)<br />size值加一，之后l，newNode这些被释放，变成了这个样子<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559974758519-bf4c2c59-72b4-410b-b05c-7dafa71dbd8f.png#align=left&display=inline&height=150&name=image.png&originHeight=300&originWidth=1016&size=57431&status=done&width=508)

删头删尾<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559974793750-8e71b500-697b-48e5-b135-7ff4a3e1e6d8.png#align=left&display=inline&height=24&name=image.png&originHeight=48&originWidth=307&size=23795&status=done&width=153.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559974879773-36e3e330-d910-4bee-9058-85bc221ca42a.png#align=left&display=inline&height=108&name=image.png&originHeight=215&originWidth=800&size=129366&status=done&width=400)<br />然后又调用....<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559974898257-9ca792ec-f105-433f-afee-301b4e092301.png#align=left&display=inline&height=233&name=image.png&originHeight=465&originWidth=661&size=191801&status=done&width=330.5)<br />把world这个单词，赋给了element对象所引用<br />接着把l的前驱赋给了prev这个节点<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559975059670-38bff2bb-2e84-423b-9e2d-292ace50012e.png#align=left&display=inline&height=200&name=image.png&originHeight=399&originWidth=996&size=88598&status=done&width=498)

再让last指向prev的位置，就是这里<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559975111380-777edcc1-78b7-4367-bae0-06118557b785.png#align=left&display=inline&height=203&name=image.png&originHeight=405&originWidth=801&size=54243&status=done&width=400.5)<br />紧接着把item清空，l.prev清空<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559975168708-0f819df3-1be3-4565-9aa2-fbfa4736bfca.png#align=left&display=inline&height=184&name=image.png&originHeight=368&originWidth=925&size=76332&status=done&width=462.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559975242081-aa45d7e3-ad33-4139-b360-9731c8310505.png#align=left&display=inline&height=223&name=image.png&originHeight=445&originWidth=908&size=73533&status=done&width=454)<br />变成这个样子<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559975315618-198bcd4f-abb7-4856-866f-7e418ffde768.png#align=left&display=inline&height=195&name=image.png&originHeight=390&originWidth=903&size=70196&status=done&width=451.5)

再把prev的next也赋为空（因为prev本身不为空）<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559975423723-59578aba-895e-4724-8f92-82285806f14a.png#align=left&display=inline&height=188&name=image.png&originHeight=376&originWidth=987&size=79777&status=done&width=493.5)<br />最后变成这样<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559975445495-f416af04-04f6-404c-b4bd-86b8bfe444c2.png#align=left&display=inline&height=197&name=image.png&originHeight=393&originWidth=1082&size=82609&status=done&width=541)<br />最后size-- 现在只剩下两个节点了<br />最后prev也没有了

删头<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559975503577-3a86efb7-4a39-4317-89d7-f6240e3d6594.png#align=left&display=inline&height=26&name=image.png&originHeight=52&originWidth=311&size=26416&status=done&width=155.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559975517804-e966a8c0-7342-4bc2-8e57-5ea31387a8a2.png#align=left&display=inline&height=109&name=image.png&originHeight=218&originWidth=654&size=101663&status=done&width=327)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559975534368-0059ff8d-ef8c-4cbc-8c2f-1a4c4d5f6f8f.png#align=left&display=inline&height=193&name=image.png&originHeight=386&originWidth=620&size=174908&status=done&width=310)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559975567310-eaa0fa96-706a-4679-a638-7f13b3c2bb82.png#align=left&display=inline&height=220&name=image.png&originHeight=439&originWidth=732&size=59655&status=done&width=366)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559975599767-536616c4-e9db-41de-8224-e8af1d43096c.png#align=left&display=inline&height=229&name=image.png&originHeight=457&originWidth=669&size=61521&status=done&width=334.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559975662502-f98779dd-0e4a-4966-a49c-498fa0d15f91.png#align=left&display=inline&height=240&name=image.png&originHeight=480&originWidth=1322&size=237357&status=done&width=661)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559975686337-71897755-bb86-4b2b-8d80-5431dd61ef26.png#align=left&display=inline&height=139&name=image.png&originHeight=278&originWidth=646&size=44443&status=done&width=323)

遍历<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559975781823-dfa5a93f-a076-4b6e-b007-a054af907af0.png#align=left&display=inline&height=21&name=image.png&originHeight=41&originWidth=524&size=34876&status=done&width=262)<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/349894/1559975750586-89723ea4-0619-4da5-aa9a-6fe91b9989e6.png#align=left&display=inline&height=55&name=image.png&originHeight=110&originWidth=462&size=42807&status=done&width=231)
