# 201@@.什么是预编译

 <br />11 PreparedStatement 的预编译能力<br />11.1什么是预编译<br />11.1.1 SQL 语句的执行步骤<br />? 语法和语义解析<br />? 优化 sql 语句，制定执行计划<br />? 执行并返回结果<br />但是很多情况，我们的一条 sql 语句可能会反复执行，或者每次执行的时候只有个别的<br />值不同（比如 select 的 where 子句值不同，update 的 set 子句值不同,insert 的 values 值不同）。<br />如果每次都需要经过上面的词法语义解析、语句优化、制定执行计划等，则效率就明显不行<br />了。<br />所谓预编译语句就是将这类语句中的值用占位符替代，可以视为将 sql 语句模板化或者<br />说参数化<br />预编译语句的优势在于：一次编译、多次运行，省去了解析优化等过程；此外预编译语<br />句能防止 sql 注入<br />11.1.2 解析过程<br />11.1.2.1 硬解析<br />在不开启缓存执行计划的情况下，每次 SQL 的处理都要经过：语法和语义的解析，优<br />化器处理 SQL，生成执行计划。整个过程我们称之为硬解析。<br />11.1.2.2 软解析<br />如果开启了缓存执行计划，数据库在处理 sql 时会先查询缓存中是否含有与当前 SQL<br />语句相同的执行计划，如果有则直接执行该计划。<br />11.2预编译方式<br />开始数据库的日志<br />show VARIABLES like '%general_log%' set GLOBAL general_log = on<br />set GLOBAL log_output='table'<br />11.2.1 依赖数据库驱动完成预编译<br />如果我们没有开启数据库服务端编译，那么默认的是使用数据库驱动完成 SQL 的预编<br />译处理。<br />11.2.2 依赖数据库服务器完成预编译<br />我们可以通过修改连接数据库的 URL 信息，添加 useServerPrepStmts=true 信息开启服<br />务端预编译。

