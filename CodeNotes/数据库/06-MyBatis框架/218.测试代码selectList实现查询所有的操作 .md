# 218.测试代码_selectList实现查询所有的操作

<a name="92017555"></a>
# 1.编写测试代码
如果不写junit(单元测试)就得写一个main方法啊去操作,有了不需要main就能运行方法
<a name="ecff77a8"></a>
### 使用
要想写junit就得导入对应相应jar包(eclipse自带)<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543699530-74cd94ab-2d29-44b4-83c1-25cfd7e09fa3.png#align=left&display=inline&height=251&originHeight=233&originWidth=772&status=done&width=831)<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543699627-063cebbc-81b7-4bf3-9f3f-ab9fd58102ae.png#align=left&display=inline&height=519&originHeight=396&originWidth=634&status=done&width=831)<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543699748-d60a9f6a-7c15-4f31-95ca-c4edcbbdc82e.png#align=left&display=inline&height=897&originHeight=680&originWidth=630&status=done&width=831)<br />可以发现多了一系列支持<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543699850-a23fbede-8100-4015-b278-c5862fc1749f.png#align=left&display=inline&height=689&originHeight=459&originWidth=423&status=done&width=635)
<a name="ecff77a8-1"></a>
### 使用
在要测试的前面加上<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543699937-e63ba2b3-e04f-4be3-ae8c-2bf40d822198.png#align=left&display=inline&height=192&originHeight=128&originWidth=550&status=done&width=825)<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543699997-ffc59f23-0b1d-46eb-bff0-66627c991cc4.png#align=left&display=inline&height=66&originHeight=44&originWidth=404&status=done&width=606)<br />加上了之后这个方法就能作为一个测试方法来调用<br />鼠标移动到方法上面,邮件runas<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543700089-22246357-79fe-47f6-9bb6-f41d1d69e16d.png#align=left&display=inline&height=119&originHeight=115&originWidth=801&status=done&width=831)<br />其中绿色的条代表运行成功<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543700169-ec56af50-3b7a-4ce5-bda7-9b1d1969a63d.png#align=left&display=inline&height=216&originHeight=144&originWidth=414&status=done&width=621)<br />如果是红色的条就是错误<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543700231-a1e0f16a-5d8d-4d64-ba8e-c85cf9dcd9fd.png#align=left&display=inline&height=720&originHeight=480&originWidth=400&status=done&width=600)
<a name="db06c78d"></a>
## 测试
<a name="4f7e7b1c"></a>
### 加载配置文件
![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543700304-8c6c15a5-935d-47fe-ad32-3836248562e5.png#align=left&display=inline&height=120&originHeight=80&originWidth=189&status=done&width=284)<br />我们当前的文件在src目录下,可以通过类加载器找到这个文件,事实上mybatis给我们的方式就是通过反射来加载<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543700361-cb80635a-f24e-4694-8891-b5048b7470e0.png#align=left&display=inline&height=216&originHeight=144&originWidth=517&status=done&width=776)<br />Mybatis其实就是对类加载器的方法做了一下封装<br />之后得到配置文件,加载后得到一个输入流<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543700431-0211ad67-5ad6-4d79-af04-f394ef7702e8.png#align=left&display=inline&height=108&originHeight=133&originWidth=1027&status=done&width=831)<br />处理输入流<br />所有Mybatis里的对象都是基于sqlsession对象<br />其中sqlsession工厂就是用来创造sqlsession对象的<br />那么我们首先要做的事情就是创建这个sqlsession工厂<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543700532-ff1609c6-8e4a-48a1-9246-a5649af071ca.png#align=left&display=inline&height=179&originHeight=381&originWidth=1767&status=done&width=831)<br />再通过工厂获取对象,打开窗口,建立一次对话的意思<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543700607-8a2125df-6464-4a9c-b270-800c2d6207c3.png#align=left&display=inline&height=86&originHeight=68&originWidth=654&status=done&width=831)<br />这样session就创建成功了 <br />最后一步记得关闭工厂就好了<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543700662-5265d587-ddc1-4e2a-bdc7-02adfdb243db.png#align=left&display=inline&height=98&originHeight=65&originWidth=265&status=done&width=398)<br />中间:<br />这个我们已经写好了<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543700753-9b6cc0ea-abb0-4e47-ba37-f063a12097c7.png#align=left&display=inline&height=409&originHeight=527&originWidth=886&status=done&width=687)<br />Session里有很多操作方法<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543700834-b2fd6d89-cb54-4386-a218-4454606b9d8b.png#align=left&display=inline&height=352&originHeight=276&originWidth=651&status=done&width=831)<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543700926-31b0dfc9-eef3-4f45-9690-6695fac67d82.png#align=left&display=inline&height=413&originHeight=304&originWidth=611&status=done&width=831)<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543701009-724d4163-65ce-4d3a-ad47-e51b5ed327e3.png#align=left&display=inline&height=496&originHeight=370&originWidth=620&status=done&width=831)<br />Selectlist返回list集合,selectmap返回map集合<br />我们当前应该返回一个list,<br />要找到我们的sql语句就要**命名空间+id**<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543701113-083f61a8-7308-4825-a12b-c0a6cb2a873c.png#align=left&display=inline&height=52&originHeight=109&originWidth=1751&status=done&width=831)<br />这样整个过程就搞定了<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561543701213-a68ea576-41aa-459a-a811-a8d7d90b3c00.png#align=left&display=inline&height=393&originHeight=922&originWidth=1950&status=done&width=831)<br />后面这些东西都会得到优化<br />需要先添加 JUnit 支持<br />package com.bjsxt.test;<br />import java.io.IOException;<br />import java.io.InputStream;<br />import java.util.List;<br />import org.apache.ibatis.io.Resources;<br />import org.apache.ibatis.session.SqlSession;<br />import org.apache.ibatis.session.SqlSessionFactory;<br />import org.apache.ibatis.session.SqlSessionFactoryBuilder;<br />import org.junit.Test;<br />import com.bjsxt.pojo.User;<br />public class TestMyBatis {<br />@Test<br />public void testSelAll() throws IOException {<br />// 加载MyBatis核心配置文件<br />InputStream is =<br />Resources.getResourceAsStream("mybatis.xml");<br />// 构建SqlSessionFactory工厂对象<br />SqlSessionFactory factory = new<br />SqlSessionFactoryBuilder().build(is);<br />// 通过工厂打开SqlSession<br />SqlSession session = factory.openSession();<br />// 通过session执行查询操作<br />List<User> list =<br />session.selectList("com.bjsxt.mapper.UserMapper.selAll");<br />System.out.println(list);<br />// 关闭资源<br />session.close();<br />}<br />}
