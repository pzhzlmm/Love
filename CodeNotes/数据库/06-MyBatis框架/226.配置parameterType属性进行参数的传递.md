# 226.配置parameterType属性进行参数的传递

<a name="5920b4fd"></a>
# 1. 带参数的查询
如果执行的是条件查询, 需要在调用方法时传参数进来, 此<br />时, 可以在 select 标签中通过 parameterType 属性指定参数<br />的类型. 而在 SQL 语句中, 可以通过#{}的方式获取参数.
<a name="db68e2c1"></a>
## 1.1 一个参数的查询
例如, 根据 id 查询用户信息. 当只有一个参数时, #{}中可<br />以任意填写.<br /><!-- parameterType, 参数类型, 用于参数的传递 --><br /><select id="selById" resultType="user" parameterType="int"><br /><!--<br />#{}用于获取参数<br />index, 索引, 从0开始<br />param+数字, param1, param2<br />--><br />select * from t_user where id=#{param1}<br /></select><br />@Test<br />public void selById() {<br />SqlSession session = null;<br />try {<br />session = new SqlSessionFactoryBuilder()<br />.build(Resources.getResourceAsStream("mybatis-cfg.xml"))<br />.openSession();<br />User user =<br />session.selectOne("com.bjsxt.mapper.UserMapper.selById", 2);<br />System.out.println(user);<br />} catch (IOException e) {<br />e.printStackTrace();<br />} finally {<br />session.close();<br />}<br />}
<a name="9371a101"></a>
## 1.2 多个参数的查询
多个参数传递时, 由于 sqlSession 中提供的查询方法只允<br />许传入一个参数, 因此可以对多个参数进行封装. 可以使用
<a name="dd649b23"></a>
# 对象或 Map 集合.
我们现在做的查询都是对所有数据的,查单个数据的时候还得去改代码<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561544009424-fbdec2bd-32a0-4291-9242-2a16d521412d.png#align=left&display=inline&height=255&originHeight=285&originWidth=733&status=done&width=657)
<a name="903f4b1b"></a>
#### 传参
方法头<br />现在我们想把参数传进来<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561544009511-903c60df-7f59-4909-b87d-5c44277c1588.png#align=left&display=inline&height=196&originHeight=239&originWidth=1014&status=done&width=831)<br />对应的参数类型的别名的类型去内建的类型别名去找<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561544009590-dc983a82-4f68-4b96-84da-de48631f4025.png#align=left&display=inline&height=245&originHeight=312&originWidth=955&status=done&width=750)<br />如果写int也可以,因为1.5以后提供了自动拆箱和装箱<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561544009671-9a95d4fb-6960-4c51-8a83-93cda4f6ead4.png#align=left&display=inline&height=44&originHeight=35&originWidth=657&status=done&width=831)<br />所以这里写int和_int的效果是一样的<br />方法体<br />在我们写sql的时候写?会自动给你绑定参数在这里#{}会来取传进来的参数<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561544009780-6d0ebf8b-22f7-4586-bd93-b01ea075e309.png#align=left&display=inline&height=263&originHeight=367&originWidth=957&status=done&width=685)<br />表示从外面获取数据,传到0的位置上面<br />测试<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561544009878-d0c37801-3dd0-4690-925f-fc2ed10aecbe.png#align=left&display=inline&height=307&originHeight=700&originWidth=1896&status=done&width=831)<br />输出:<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561544010098-9e1f5c35-2ab6-4868-9ac1-f010ea9e851e.png#align=left&display=inline&height=136&originHeight=186&originWidth=1138&status=done&width=831)
<a name="ab70156a"></a>
#### 传参特殊
这里其实写什么参数都能查的到<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561544010175-ba895235-9a9c-44ca-8d6d-2de5a0e835e2.png#align=left&display=inline&height=239&originHeight=272&originWidth=945&status=done&width=831)<br />它代表了param1,但建议不要乱写,写param0,或者param1
<a name="5283aba1"></a>
### 传两个参数/封装为对象
目前我们只能传一个参数进来,提供的方法也是这样,那么怎么传两个参数呢?<br />我们传一个对象,对象包含两个参数(如用户名和密码),这样就实现了变象的传两个参数<br />传多个也是同理的,只要封装为一个对象,我们就能一次性变象地传入多个参数<br />这里的parameterType的user是com.bjsxt.xx.userd的别名<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561544010268-42b75936-e2ae-464a-956d-9116e940f829.png#align=left&display=inline&height=291&originHeight=642&originWidth=1833&status=done&width=831)<br />测试<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561544010392-b401cba5-c762-448e-9ee6-f82064f1fdc1.png#align=left&display=inline&height=279&originHeight=675&originWidth=1840&status=done&width=761)<br />结果<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561544010488-01023538-b7e2-46f4-9a2b-c4783d7b0780.png#align=left&display=inline&height=88&originHeight=191&originWidth=1726&status=done&width=793)

<select id="sel" resultType="user" parameterType="user"><br /><!-- 如果参数是对象, 可以通过#{属性名}来获取 --><br />select * from t_user where username=#{username} and<br />password=#{password}<br /></select><br />@Test<br />public void sel() {<br />SqlSession session = null;<br />try {<br />session = new SqlSessionFactoryBuilder()<br />.build(Resources.getResourceAsStream("mybatis-cfg.xml"))<br />.openSession();<br />User u = new User();<br />u.setUsername("zhangsan");<br />u.setPassword("123");<br />User user =<br />session.selectOne("com.bjsxt.mapper.UserMapper.sel", u);<br />System.out.println(user);<br />} catch (IOException e) {<br />e.printStackTrace();<br />} finally {<br />session.close();<br />}<br />}
<a name="be68e3ea"></a>
### 1.2.2 封装为 Map
除却上面那种方式外,还可以封装为集合<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561544010586-2b931ed0-e147-4e7c-8e2e-50bf9d8b9409.png#align=left&display=inline&height=368&originHeight=829&originWidth=1874&status=done&width=831)<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561544010713-76fadf67-7e22-4200-85ee-2222674f69b5.png#align=left&display=inline&height=327&originHeight=666&originWidth=1695&status=done&width=831)<br />结果<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561544010819-19380f67-009c-4cde-94a3-f51e95c63f68.png#align=left&display=inline&height=104&originHeight=216&originWidth=1731&status=done&width=831)

<select id="sel" resultType="user" parameterType="map"><br /><!-- 如果参数是map, 可以通过#{key}来获取 --><br />select * from t_user where username=#{uname} and password=#{upwd}<br /></select><br />@Test<br />public void sel() {<br />SqlSession session = null;<br />try {<br />session = new SqlSessionFactoryBuilder()<br />.build(Resources.getResourceAsStream("mybatis-cfg.xml"))<br />.openSession();<br />Map<String, String> map = new HashMap<>();<br />map.put("uname", "lisi");<br />map.put("upwd", "123");<br />User user =<br />session.selectOne("com.bjsxt.mapper.UserMapper.sel", map);<br />System.out.println(user);<br />} catch (IOException e) {<br />e.printStackTrace();<br />} finally {<br />session.close();<br />}<br />}
