# 217.MyBatis映射文件编写及扫描配置

<a name="ea2912d2"></a>
## 定义pojo类
我们现在有个表格想要查询其中数据<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561451039003-475b2e8b-8f70-469c-8016-e25ae571db60.png#align=left&display=inline&height=323&originHeight=499&originWidth=1285&status=done&width=831)<br />查到的数据应该是一个list集合,集合里应该是对象,因而我们现在先定义对应的实体类<br />定义成员变量,生成tostring<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561451039092-ab932ebc-b58f-42d9-af2a-420c4bc13e0c.png#align=left&display=inline&height=244&originHeight=446&originWidth=1522&status=done&width=831)<br />Hashcodeequals<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561451039186-0e3d389a-f377-4754-8868-9e15af4e4b5d.png#align=left&display=inline&height=506&originHeight=524&originWidth=860&status=done&width=831)<br />Getset方法<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561451039308-48bb8755-a80c-4166-b133-2efadccded84.png#align=left&display=inline&height=363&originHeight=242&originWidth=459&status=done&width=689)<br />再加个无参构造,实现以下serializable接口<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561451039392-f49465cf-5665-4444-a3a6-571f5c211c53.png#align=left&display=inline&height=564&originHeight=518&originWidth=763&status=done&width=831)

<a name="68bdc20d"></a>
## 数据访问层/Mapper 映射文件
在 MyBatis 中, 推荐使用 mapper 作为包名, 我们只需要写一个映射配置文件即可. UserMapper.xml, 用于定义要执行的 SQL 语句, 同时设定返回结果的类型.<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561451039469-b402a597-b525-4e1c-84bc-dde90e034608.png#align=left&display=inline&height=265&originHeight=330&originWidth=1034&status=done&width=831)<br />快捷键f2重命名<br />具体怎么写继续找dtd文件<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561451039539-6388ee1a-cdf3-46f3-8807-f32f6ee0c8b3.png#align=left&display=inline&height=443&originHeight=307&originWidth=576&status=done&width=831)<br />然后ctrl+/根元素就出来了,没有继续加<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561451039620-c8b05873-d83b-451f-b3ea-acb72f823dc6.png#align=left&display=inline&height=254&originHeight=259&originWidth=849&status=done&width=831)<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561451039807-1f477df5-5dad-438e-a817-4cd5dc83090f.png#align=left&display=inline&height=432&originHeight=359&originWidth=691&status=done&width=831)<br />这样就出来了<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561451039881-eb2faf6c-6a54-4f15-841a-4c1ae9cba1b8.png#align=left&display=inline&height=595&originHeight=430&originWidth=601&status=done&width=831)<br />接着定义命名空间,类似于包的存在(405的张三和406的张三)<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561451039990-32c5608e-1dda-4521-bd72-28a49bd0f0ea.png#align=left&display=inline&height=142&originHeight=199&originWidth=1162&status=done&width=831)<br />原来dao里写接口,接口里写实现类,这里就相当于包名+类名<br /><?xml version="1.0" encoding="UTF-8"?><br /><!DOCTYPE mapper<br /> PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"<br /> "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><br /><!--<br />namespace: 命名空间, 可以随意定义, 一般情况下要写全限定路径(原来的包名+类名)<br />MyBatis管理SQL语句是通过namespace+id来定位的<br />--><br /><mapper namespace="com.bjsxt.mapper.UserMapper">

命名空间下写操作

<!--<br />select标签用于编写查询语句<br />id: sql语句的唯一标识, 类比为方法名<br />resultType: 用于设定返回结果的类型(全限定路径)<br />如果返回结果是集合, 要写集合泛型的类型<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561451040079-80503553-fb02-4bf8-82c4-6be6a95dd98b.png#align=left&display=inline&height=275&originHeight=480&originWidth=1449&status=done&width=831)<br />“方法体”部分写上查询语句就可以了,注意不要加分号<br />--><br /><select id="selAll" resultType="com.bjsxt.pojo.User"><br />select * from t_user<br /></select><br /></mapper>
<a name="504a2416"></a>
## 2. 在核心配置文件中添加 mapper 扫描
![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561451040177-95f33488-e8d9-48db-a56b-306059fbe4f6.png#align=left&display=inline&height=425&originHeight=588&originWidth=1151&status=done&width=831)<br />Class是一个类,文件其实就是一个资源,所有我们这儿写resource<br />我们要找到它就得写明它的全限定路径,即<br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561451040257-3ee0e9a1-3e9b-4295-99ee-eadc8ecdac64.png#align=left&display=inline&height=113&originHeight=122&originWidth=895&status=done&width=831)<br /><!-- 扫描mapper文件 --><br /><mappers><br /><mapper resource="com/bjsxt/mapper/UserMapper.xml" /><br /></mappers><br />![](https://cdn.nlark.com/yuque/0/2019/png/349894/1561451040342-31d36371-99eb-4eaa-91aa-f5f25fe4410d.png#align=left&display=inline&height=324&originHeight=561&originWidth=1440&status=done&width=831)
