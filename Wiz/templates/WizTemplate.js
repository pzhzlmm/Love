!function(){function e(t,a,l){function n(d,u){if(!a[d]){if(!t[d]){var i="function"==typeof require&&require;if(!u&&i)return i(d,!0);if(o)return o(d,!0);var s=new Error("Cannot find module '"+d+"'");throw s.code="MODULE_NOT_FOUND",s}var r=a[d]={exports:{}};t[d][0].call(r.exports,function(e){var a=t[d][1][e];return n(a||e)},r,r.exports,e,t,a,l)}return a[d].exports}for(var o="function"==typeof require&&require,d=0;d<l.length;d++)n(l[d]);return n}return e}()({1:[function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var n=e("./common/env"),o=l(n),d=e("./common/const"),u=(l(d),e("./common/lang")),i=(l(u),e("./utils/utils.js")),s=(l(i),e("./utils/insertImgUtils")),r=l(s),f=e("./template/base"),c=l(f),m={init:function(e){return o.default.setDoc(e.document||window.document),o.default.client.setType(e.clientType),(0,u.initLang)(e.lang),m},on:function(e){return c.default.getTemplate()&&c.default.on(e),m},off:function(){return c.default.off(),m},focus:function(){return c.default.focus(),m},getTemplate:function(){return c.default.getTemplate()},hideTemplate:function(){return c.default.hideElement(),m},hideTemplateFormHtml:function(e){return c.default.hideElementFromHtml(e)},img:{insertByPath:function(e,t){r.default.insertByPath(e,t)}},setContenteditable:function(e){return c.default.setContenteditable(e),m},version:"0.1.0"};window.WizTemplate=m},{"./common/const":2,"./common/env":3,"./common/lang":4,"./template/base":5,"./utils/insertImgUtils":8,"./utils/utils.js":15}],2:[function(e,t,a){"use strict";a.__esModule=!0;var l="wiz-template-",n={Attr:{TemplateFormat:"data-template-format",TemplateName:"data-template-name",SelectBind:"data-select-bind",SelectLayer:"data-select-layer",MenuBind:"data-menu-bind",MenuLayer:"data-menu-layer",TemplateVersion:"data-template-version",OptionAction:"data-option-action",ClientType:"data-template-client",Placeholder:"data-template-placeholder",DateValue:"data-template-date-value"},Class:{Client:{Android:l+"client-android",Ios:l+"client-ios",Mac:l+"client-mac",Web:l+"client-web",Win:l+"client-win",Pc:l+"client-pc",Phone:l+"client-phone"},Active:"active",Common:l+"node",Date:l+"date",DateContainer:l+"date-container",DateInputTmpTag:l+"date-input-container",DateInput:l+"date-input",Editable:l+"editable",FloatLayer:l+"floatLayer",Focus:l+"focus",Hide:l+"hide",InsertImg:l+"insert-img",Option:l+"option",Select:l+"select",SelectBtn:l+"select-btn",Menu:l+"menu",MenuBtn:l+"menu-btn",Diary:{blue:"mood-blue",purple:"mood-purple",green:"mood-green",red:"mood-red",sun:"weather-sun",wind:"weather-wind",rain:"weather-rain",snow:"weather-snow",mood:"mood",weather:"weather"},TodoImg:"wiz-todo-img",Sudoku:{index:l+"sudoku-index",indexHide:"sudoku-index-hide",content:l+"sudoku-content",grid:"sudoku-grid",aniDiV:"sudoku-animation",btn:l+"sudoku-btn",indexBtn:"sudoku-btn-index",nextBtn:"sudoku-btn-next",previousBtn:"sudoku-btn-previous"}},Id:{TemplateInfo:l+"info",TemplateInsertImgPre:l+"insert-img"},EVENT:{InsertImg:"wizTemplateInsertImg",setStyle:"wizTemplateSetStyle"},DiaryStyle:{bgColor:{blue:"#e0f5fc",purple:"#eee6f5",green:"#e3f6e3",red:"#fae7ea"}},NAME:{TMP_STYLE:"wiz_tmp_editor_style"},TAG:{TMP_TAG:"wiz_tmp_tag"}};a.default=n},{}],3:[function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var n=e("./const"),o=l(n),d="wiznotecmd://",u={win:null,doc:null,setDoc:function(e){e&&(u.doc=e,u.win=u.doc.defaultView)},client:{clientType:"windows",type:{isWeb:function(){return location&&0===location.protocol.indexOf("http")}(),isWin:!1,isMac:!1,isIOS:!1,isAndroid:!1,isPad:!1,isPhone:!1},sendCmdToWiznote:function(e,t){},setType:function(e){e&&(e=e.toLowerCase(),e.indexOf("windows")>-1||e.indexOf("win")>-1?(u.client.type.isWin=!0,u.client.clientType="windows"):e.indexOf("ios")>-1?(u.client.type.isIOS=!0,u.client.clientType="ios",u.client.sendCmdToWiznote=function(e,t){var a="";e==o.default.EVENT.InsertImg?a=d+e+"?userInfo="+encodeURIComponent(t.userInfo)+"&message="+encodeURIComponent(t.message)+"&cameraOnly="+t.cameraOnly:e==o.default.EVENT.setStyle&&(a=d+e+"?bgColor="+encodeURIComponent(t.bgColor)+"&titleColor="+encodeURIComponent(t.titleColor)+"&folderColor="+encodeURIComponent(t.folderColor)+"&lineColor="+encodeURIComponent(t.lineColor));var l=u.doc.createElement("iframe");l.setAttribute("src",a),u.doc.documentElement.appendChild(l),l.parentNode.removeChild(l),l=null}):e.indexOf("android")>-1?(u.client.type.isAndroid=!0,u.client.clientType="android",u.client.sendCmdToWiznote=function(e,t){}):e.indexOf("mac")>-1?(u.client.type.isMac=!0,u.client.clientType="mac"):e.indexOf("web")>-1&&(u.client.type.isWeb=!0,u.client.clientType="web"),(u.client.type.isIOS||u.client.type.isAndroid)&&(e.indexOf("pad")>-1?u.client.type.isPad=!0:u.client.type.isPhone=!0))}}};a.default=u},{"./const":2}],4:[function(e,t,a){"use strict";function l(e){e||(e="en"),e=e.toLowerCase().replace("_","-"),n[e]?o=e:e="en";var t;for(t in n[e])n[e].hasOwnProperty(t)&&(d[t]=n[e][t])}a.__esModule=!0;var n={},o="en",d={};n.en={weeks:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},n["zh-cn"]={weeks:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},n["zh-tw"]={weeks:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},a.default=d;a.initLang=function(e){l(e)}},{}],5:[function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var n=e("../common/env"),o=l(n),d=e("../common/const"),u=l(d),i=e("../utils/utils"),s=l(i),r=e("../utils/insertImgUtils.js"),f=l(r),c=e("../utils/dateUtils.js"),m=l(c),p=e("../utils/selectUtils.js"),y=l(p),C=e("../utils/todoPatch.js"),h=l(C),v=e("../utils/menuUtils.js"),g=l(v),b=e("../utils/sudokuUtils.js"),S=l(b),w=e("../utils/placeHolederUtils.js"),T=l(w),A=e("../utils/snowUtils.js"),E=l(A),I=e("../template/wizStyle"),k=l(I),x={on:function(e){this.fixStyle(),k.default.initBody(e),E.default.on(),S.default.on(e),e||(x.showElement(),x.bind(),f.default.on(),m.default.on(e),y.default.on(),h.default.on(),g.default.on(),T.default.on())},off:function(){this.fixStyle(),x.hideElement(),x.unbind(),f.default.off(),m.default.off(),y.default.off(),h.default.off(),g.default.off(),S.default.off(),E.default.off()},bind:function(){},unbind:function(){},fixStyle:function(){var e=o.default.doc.querySelector("."+u.default.Class.DateContainer);if(e){e.style.margin=0;var t,a,l=o.default.doc.querySelectorAll("."+u.default.Class.Date);for(t=0;t<l.length;t++)a=l[t],a.style.margin=0,a.parentNode.style.marginTop=0,a.parentNode.style.marginBottom=0;var n=this.getTemplate();if(n&&"dairy"===n.name&&"0.0.1"===n.version&&(o.default.doc.body.style.height="auto"),n&&"sudoku"===n.name&&"0.0.1"===n.version){o.default.doc.body.style.height="auto";var d=o.default.doc.querySelector("."+u.default.Class.Sudoku.content);d&&(d.style.height="auto",d.style.overflow="visible"),k.default.insertStyle({id:"sudoku-patch-0.0.1"},"body .wiz-template-sudoku-content .wiz-template-sudoku-index {margin-left: -120px;}@media screen and (max-width: 768px) {body .wiz-template-sudoku-content .wiz-template-sudoku-index {margin-left: 0;}}")}}},focus:function(){var e=o.default.doc.querySelector("."+u.default.Class.Focus);e?e.focus():(o.default.client.type.isAndroid&&0===o.default.doc.body.scrollTop||!o.default.client.type.isAndroid)&&o.default.doc.body.focus()},getTemplate:function(){var e=o.default.doc.querySelector("#"+u.default.Id.TemplateInfo);return e?{name:e.getAttribute(u.default.Attr.TemplateName)||e.getAttribute("data-templatename"),version:e.getAttribute(u.default.Attr.TemplateVersion)||e.getAttribute("data-templateversion")}:null},hideElement:function(){var e,t,a=s.default.getTemplateElements();if(a)for(e=0,t=a.length;e<t;e++)s.default.addClass(a[e],u.default.Class.Hide)},hideElementFromHtml:function(e){var t=/(<[^<> ]*[^<>]* class[ ]*=[ ]*['"])([^'"]*)(['"])/i,a=/(<[^<> ]*[^<>]* class[ ]*=[ ]*['"])([^'"]*)(['"])/gi;if(!t.test(e))return e;for(var l,n,o,d=[],i=0;l=a.exec(e);){if(n=l[2],(" "+n+" ").indexOf(" "+u.default.Class.FloatLayer+" ")>-1)o=new RegExp(" "+u.default.Class.Active+" ","ig"),n=s.default.trim((" "+n+" ").replace(o,""));else{if((" "+n+" ").indexOf(" "+u.default.Class.Common+" ")===-1){d.push(e.substr(i,l.index-i),l[0]),i=l.index+l[0].length;continue}(" "+n+" ").indexOf(" "+u.default.Class.Hide+" ")===-1&&(n+=" "+u.default.Class.Hide)}d.push(e.substr(i,l.index-i),l[1],n,l[3]),i=l.index+l[0].length}return d.push(e.substr(i)),d.join("")},setContenteditable:function(e){var t,a,l=o.default.doc.querySelectorAll("."+u.default.Class.Editable);if(0===l.length)o.default.doc.body.setAttribute("contenteditable",e?"true":"false");else for(e&&o.default.doc.body.setAttribute("contenteditable","false"),t=0,a=l.length;t<a;t++)l[t].setAttribute("contenteditable",e?"true":"false")},showElement:function(){var e,t,a,l=s.default.getTemplateElements();if(l)for(e=0,t=l.length;e<t&&(a=l[e].getAttribute(u.default.Attr.ClientType),!(a&&a.indexOf(o.default.client.clientType)>0));e++)s.default.removeClass(l[e],u.default.Class.Hide)}};a.default=x},{"../common/const":2,"../common/env":3,"../template/wizStyle":6,"../utils/dateUtils.js":7,"../utils/insertImgUtils.js":8,"../utils/menuUtils.js":9,"../utils/placeHolederUtils.js":10,"../utils/selectUtils.js":11,"../utils/snowUtils.js":12,"../utils/sudokuUtils.js":13,"../utils/todoPatch.js":14,"../utils/utils":15}],6:[function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var n=e("../common/env"),o=l(n),d=e("../common/const"),u=l(d),i=e("../utils/utils"),s=l(i),r={common:".date, .wiz-template-data-container {position:relative}.wiz-template-client-pc .wiz-template-date-input-container {background:white;padding-top:8px;position:absolute;top:0;left:0;bottom:0;right:0;}.wiz-template-client-phone .wiz-template-date-input {position:absolute;top:0;left:0;bottom:0;right:0;opacity:0;}"},f={common:""},c={insertStyle:function(e,t){var a=o.default.doc.createElement("style");return e.name&&a.setAttribute("name",e.name),e.id&&(a.setAttribute("id",e.id),c.removeStyleById(e.id)),o.default.doc.getElementsByTagName("HEAD")[0].insertBefore(a,null),a.innerHTML=t,a},insertTmpEditorStyle:function(){c.insertStyle({name:u.default.NAME.TMP_STYLE},r.common)},insertTmpReaderStyle:function(){c.insertStyle({name:u.default.NAME.TMP_STYLE},f.common)},initBody:function(e){s.default.removeClass(o.default.doc.body,u.default.Class.Client.Android),s.default.removeClass(o.default.doc.body,u.default.Class.Client.Ios),s.default.removeClass(o.default.doc.body,u.default.Class.Client.Mac),s.default.removeClass(o.default.doc.body,u.default.Class.Client.Web),s.default.removeClass(o.default.doc.body,u.default.Class.Client.Win),s.default.removeClass(o.default.doc.body,u.default.Class.Client.Pc),s.default.removeClass(o.default.doc.body,u.default.Class.Client.Phone);var t=o.default.client.type.isAndroid||o.default.client.type.isIOS?u.default.Class.Client.Phone:u.default.Class.Client.Pc;t+=" ",o.default.client.type.isAndroid?t+=u.default.Class.Client.Android:o.default.client.type.isIOS?t+=u.default.Class.Client.Ios:o.default.client.type.isMac?t+=u.default.Class.Client.Mac:o.default.client.type.isWeb?t+=u.default.Class.Client.Web:o.default.client.type.isWin&&(t+=u.default.Class.Client.Win),s.default.addClass(o.default.doc.body,t),e?c.insertTmpReaderStyle():c.insertTmpEditorStyle()},removeStyleById:function(e){if(e){var t=o.default.doc.getElementById(e);t&&t.parentNode.removeChild(t)}}};t.exports=c},{"../common/const":2,"../common/env":3,"../utils/utils":15}],7:[function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!t)return"";var a=o(e.getFullYear(),4),l=o(e.getMonth()+1,2),n=o(e.getDate(),2),d=m.default.weeks[e.getDay()];return t.replace(/yyyy/gi,a).replace(/mm/gi,l).replace(/dd/gi,n).replace(/ww/gi,d)}function o(e,t){for(e+="";e.length<t;)e="0"+e;return e}a.__esModule=!0;var d,u,i=e("../common/env"),s=l(i),r=e("../common/const"),f=l(r),c=e("../common/lang"),m=l(c),p=e("./utils"),y=l(p),C={on:function(e){if(!e){var t=0;s.default.client.type.isWin&&(t=500),setTimeout(function(){h.init(),v.bind()},t)}},off:function(){v.unbind()}},h={init:function(){return d=s.default.doc.querySelector("."+f.default.Class.DateContainer),u=s.default.doc.querySelectorAll("."+f.default.Class.Date),0===u.length?void(d=null):(d||(d=u[0].parentNode.parentNode,y.default.hasClass(d,"date")||(d=null)),void(d&&d.getAttribute(f.default.Attr.DateValue)||h.setDateList(new Date)))},initInput:function(){var e=parseInt(d.getAttribute(f.default.Attr.DateValue),10);if(e&&!isNaN(e)){var t=new Date(e);h.showTmpTag(t)}},setDateList:function(e){if(e){var t,a,l;for(t=0,a=u.length;t<a;t++)l=u[t],l.innerHTML=n(e,l.getAttribute(f.default.Attr.TemplateFormat));d&&d.setAttribute(f.default.Attr.DateValue,e.valueOf())}},tmpTagIsShow:function(){var e=d.querySelector("."+f.default.Class.DateInputTmpTag);return!!e&&"none"!==e.style.display},hideTmpInput:function(){if(!s.default.client.type.isIOS&&!s.default.client.type.isAndroid){var e=d.querySelector("."+f.default.Class.DateInputTmpTag),t=d.querySelector("."+f.default.Class.DateInput);e&&t&&(e.style.opacity=0,t.style.opacity=0)}},showTmpInput:function(){if(!s.default.client.type.isIOS&&!s.default.client.type.isAndroid){var e=d.querySelector("."+f.default.Class.DateInputTmpTag),t=d.querySelector("."+f.default.Class.DateInput);e&&t&&(e.style.opacity=1,t.style.opacity=1,t.focus())}},hideTmpTag:function(){if(!s.default.client.type.isIOS&&!s.default.client.type.isAndroid){var e=d.querySelector("."+f.default.Class.DateInputTmpTag);e&&(e.style.display="none")}},showTmpTag:function(e){var t,a=d.querySelector("."+f.default.Class.DateInputTmpTag);a?(t=d.querySelector("input"),a.style.display="block"):(a=s.default.doc.createElement(f.default.TAG.TMP_TAG),t=s.default.doc.createElement("input"),t.setAttribute("type","date"),y.default.addClass(a,f.default.Class.DateInputTmpTag),y.default.addClass(t,f.default.Class.DateInput),a.appendChild(t),d.appendChild(a),y.default.bind(t,"change",v.handler.onChange),y.default.bind(t,"blur",v.handler.onBlur)),t.value=n(e,"yyyy-mm-dd"),h.showTmpInput()}},v={bind:function(){d&&(s.default.client.type.isIOS||s.default.client.type.isAndroid?h.initInput():y.default.bind(s.default.doc.body,"click",v.handler.onClick))},unbind:function(){y.default.unbind(d,"click",v.handler.onClick)},handler:{onBlur:function(){h.hideTmpInput()},onClick:function(e){var t,a=e.target||event.srcElement;h.tmpTagIsShow()?y.default.hasClass(a,f.default.Class.DateInput)||h.hideTmpTag():(t=y.default.getParentByFilter(a,function(e){return y.default.hasClass(e,f.default.Class.DateContainer)}),t&&h.initInput())},onChange:function(e){var t,a=e.target||event.srcElement;a.value&&(t=new Date(a.value),h.setDateList(t)),h.hideTmpTag()}}};a.default=C},{"../common/const":2,"../common/env":3,"../common/lang":4,"./utils":15}],8:[function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e){return m.default.hasClass(e,f.default.Class.InsertImg)}function o(e){var t,a=e.target||e.srcElement,l=m.default.getParentByFilter(a,n);l&&(a.id||(a.id=f.default.Id.TemplateInsertImgPre+(new Date).valueOf()),t={id:a.id},s.default.client.sendCmdToWiznote(f.default.EVENT.InsertImg,{userInfo:JSON.stringify(t),message:"模板插入图片",cameraOnly:"true"}))}function d(e,t,a){if(e){var l,n;if(m.default.isArray(e))for(l=0,n=e.length;l<n;l++)t.insertBefore(e[l],a);else t.insertBefore(e,a)}}function u(e){var t,a,l,n,o=[],d=[];for(e.indexOf("*")?d=e.split("*"):d.push(e),l=0,n=d.length;l<n;l++)t=s.default.doc.createElement("div"),o.push(t),a=s.default.doc.createElement("img"),a.src=d[l],a.style.maxWidth="100%",t.insertBefore(a,null);return t=s.default.doc.createElement("div"),t.insertBefore(s.default.doc.createElement("br"),null),o.push(t),o}a.__esModule=!0;var i=e("../common/env.js"),s=l(i),r=e("../common/const.js"),f=l(r),c=e("./utils.js"),m=l(c),p={on:function(){p.off(),m.default.bind(s.default.doc.body,"click",o)},off:function(){m.default.unbind(s.default.doc.body,"click",o)},insertByPath:function(e,t){t?"string"==typeof t&&(t=decodeURIComponent(t),t=JSON.parse(t)):t={};var a=s.default.doc.getElementById(t.id),l=a&&a!=s.default.doc.body?a.parentNode:s.default.doc.body;d(u(e),l,a||null)}};a.default=p},{"../common/const.js":2,"../common/env.js":3,"./utils.js":15}],9:[function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e){return h.default.hasClass(e,y.default.Class.MenuBtn)||h.default.hasClass(e,y.default.Class.Option)}function o(e){return h.default.hasClass(e,y.default.Class.Menu)}function d(e){return h.default.hasClass(e,y.default.Class.FloatLayer)}function u(e){var t,a,l=e.target||e.srcElement,o=h.default.getParentByFilter(l,n);if(o&&h.default.hasClass(o,y.default.Class.MenuBtn)){if(t=o.getAttribute(y.default.Attr.MenuLayer),!t)return;if(a=m.default.doc.getElementById(t),!a)return;h.default.hasClass(a,y.default.Class.Active)||(v=h.default.getTemplateRange())}}function i(e){var t,a,l,d,u=e.target||e.srcElement,i=h.default.getParentByFilter(u,n);if(i&&h.default.hasClass(i,y.default.Class.MenuBtn)){if(l=i.getAttribute(y.default.Attr.MenuLayer),!l)return;if(d=m.default.doc.getElementById(l),!d)return;h.default.hasClass(d,y.default.Class.Active)?(h.default.removeClass(d,y.default.Class.Active),h.default.removeClass(i,y.default.Class.Active),h.default.setTemplateRange(v),f()):(h.default.addClass(d,y.default.Class.Active),h.default.addClass(i,y.default.Class.Active),r())}else if(i){if(t=h.default.getParentByFilter(u,o),!t)return;if(h.default.hasClass(i,y.default.Class.Active))return;a=m.default.doc.querySelector("."+y.default.Class.MenuBtn),a.innerHTML=i.innerHTML,l=a.getAttribute(y.default.Attr.MenuLayer),d=m.default.doc.getElementById(l),h.default.removeClass(d,y.default.Class.Active),h.default.removeClass(a,y.default.Class.Active)}}function s(e){var t=e.target||e.srcElement,a=h.default.getParentByFilter(t,n);a||(a=h.default.getParentByFilter(t,d));var l,o,u;if(!a){for(l=m.default.doc.querySelectorAll("."+y.default.Class.FloatLayer+"."+y.default.Class.Active),o=0,u=l.length;o<u;o++)h.default.removeClass(l[o],y.default.Class.Active);f()}}function r(){m.default.client.type.isPhone?h.default.bind(m.default.doc.body,"touchstart",s):h.default.bind(m.default.doc.body,"click",s)}function f(){m.default.client.type.isPhone?h.default.unbind(m.default.doc.body,"touchstart",s):h.default.unbind(m.default.doc.body,"click",s)}a.__esModule=!0;var c=e("../common/env.js"),m=l(c),p=e("../common/const.js"),y=l(p),C=e("./utils.js"),h=l(C),v=null,g={on:function(){g.off(),h.default.bind(m.default.doc.body,m.default.client.type.isPhone?"touchstart":"mousedown",u),h.default.bind(m.default.doc.body,"click",i)},off:function(){h.default.unbind(m.default.doc.body,m.default.client.type.isPhone?"touchstart":"mousedown",u),h.default.unbind(m.default.doc.body,"click",i)}};a.default=g},{"../common/const.js":2,"../common/env.js":3,"./utils.js":15}],10:[function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e){r.default.bind(e,"focus",function(){e.textContent.trim()||(e.textContent=e.getAttribute(i.default.Attr.Placeholder))}),r.default.bind(e,"blur",function(){e.textContent.trim()==e.getAttribute(i.default.Attr.Placeholder)&&(e.textContent="")})}a.__esModule=!0;var o=e("../common/env.js"),d=l(o),u=e("../common/const.js"),i=l(u),s=e("./utils.js"),r=l(s),f={on:function(){f.off();var e=d.default.doc.querySelectorAll(".wiz-template-placeholder");if(e.length)for(var t=0,a=e.length;t<a;t++)n(e[t])},off:function(){}};a.default=f},{"../common/const.js":2,"../common/env.js":3,"./utils.js":15}],11:[function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e){return g.default.hasClass(e,h.default.Class.SelectBtn)||g.default.hasClass(e,h.default.Class.Option)}function o(e){return g.default.hasClass(e,h.default.Class.Select)}function d(e){return g.default.hasClass(e,h.default.Class.FloatLayer)}function u(e){var t,a,l=e.target||e.srcElement,o=g.default.getParentByFilter(l,n);if(o&&g.default.hasClass(o,h.default.Class.SelectBtn)){if(t=o.getAttribute(h.default.Attr.SelectLayer),!t)return;if(a=y.default.doc.getElementById(t),!a)return;g.default.hasClass(a,h.default.Class.Active)||(b=g.default.getTemplateRange())}}function i(e){var t,a,l,d=e.target||e.srcElement,u=g.default.getParentByFilter(d,n);if(u&&g.default.hasClass(u,h.default.Class.SelectBtn)){if(a=u.getAttribute(h.default.Attr.SelectLayer),!a)return;if(l=y.default.doc.getElementById(a),!l)return;g.default.hasClass(l,h.default.Class.Active)?(g.default.removeClass(l,h.default.Class.Active),y.default.doc.querySelector(".layer-mask")&&g.default.removeClass(y.default.doc.querySelector(".layer-mask"),h.default.Class.Active),g.default.setTemplateRange(b),f()):(g.default.addClass(l,h.default.Class.Active),y.default.doc.querySelector(".layer-mask")&&g.default.addClass(y.default.doc.querySelector(".layer-mask"),h.default.Class.Active),r())}else if(u){if(t=g.default.getParentByFilter(d,o),!t)return;if(g.default.hasClass(u,h.default.Class.Active))return;if(g.default.hasClass(u.parentNode,h.default.Class.Diary.mood)){if(g.default.removeClass(y.default.doc.body,h.default.Class.Diary.blue),g.default.removeClass(y.default.doc.body,h.default.Class.Diary.green),g.default.removeClass(y.default.doc.body,h.default.Class.Diary.purple),g.default.removeClass(y.default.doc.body,h.default.Class.Diary.red),g.default.addClass(y.default.doc.body,u.querySelector("i").className),y.default.doc.querySelector("."+h.default.Class.Sudoku.content))return;m(u.querySelector("i").className)}else if(g.default.hasClass(u.parentNode,h.default.Class.Diary.weather)){if(y.default.doc.querySelector("i."+h.default.Class.Diary.weather).className=h.default.Class.Diary.weather+" "+u.querySelector("i").className,y.default.doc.querySelector(".weather-animation")&&(y.default.doc.querySelector(".weather-animation").className="weather-animation "+u.querySelector("i").className),y.default.doc.querySelector("."+h.default.Class.Sudoku.content))return;c(u.querySelector("i").className)}}}function s(e){var t=e.target||e.srcElement,a=g.default.getParentByFilter(t,n);a||(a=g.default.getParentByFilter(t,d));var l,o,u;if(!a){for(l=y.default.doc.querySelectorAll("."+h.default.Class.FloatLayer+"."+h.default.Class.Active),o=0,u=l.length;o<u;o++)g.default.removeClass(l[o],h.default.Class.Active);y.default.doc.querySelector(".layer-mask")&&g.default.removeClass(y.default.doc.querySelector(".layer-mask"),h.default.Class.Active),f()}}function r(){y.default.client.type.isPhone||y.default.client.type.isPad?g.default.bind(y.default.doc.body,"touchstart",s):g.default.bind(y.default.doc.body,"click",s)}function f(){y.default.client.type.isPhone||y.default.client.type.isPad?g.default.unbind(y.default.doc.body,"touchstart",s):g.default.unbind(y.default.doc.body,"click",s)}function c(e){var t,a;a=e.split("-"),a.length&&a.length>0&&(t=a[a.length-1],y.default.doc.getElementById(h.default.Id.TemplateInfo).setAttribute("data-template-weather",t))}function m(e){var t,a,l,n=h.default.DiaryStyle.bgColor;if(l=e.split("-"),l.length&&l.length>0){t=l[l.length-1];for(var o in n)if(t==o){a=n[o],y.default.doc.getElementById(h.default.Id.TemplateInfo).setAttribute("data-template-bgcolor",a);break}y.default.client.sendCmdToWiznote(h.default.EVENT.setStyle,{bgColor:a,titleColor:"",folderColor:"",lineColor:""})}g.default.modifyHtmlForPC()}a.__esModule=!0;var p=e("../common/env.js"),y=l(p),C=e("../common/const.js"),h=l(C),v=e("./utils.js"),g=l(v),b=null,S={on:function(){S.off(),g.default.bind(y.default.doc.body,y.default.client.type.isPhone||y.default.client.type.isPad?"touchstart":"mousedown",u),g.default.bind(y.default.doc.body,"click",i)},off:function(){g.default.unbind(y.default.doc.body,y.default.client.type.isPhone||y.default.client.type.isPad?"touchstart":"mousedown",u),g.default.unbind(y.default.doc.body,"click",i)}};a.default=S},{"../common/const.js":2,"../common/env.js":3,"./utils.js":15}],12:[function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var n=e("../common/env.js"),o=l(n),d=e("../common/const.js"),u=(l(d),e("./utils.js")),i=(l(u),[]),s=null,r={on:function(){r.off();var e=r.getSnowDiv();if(e){var t=o.default.doc.querySelectorAll("div.hide img");t.length&&(i=t,e.innerHTML="",f.f=!0,f.createSnow("index_files/",30))}},off:function(){f.destorySnow(),f.f=!1;var e=o.default.doc.querySelector("div.weather-animation.weather-snow");e&&(e.innerHTML="")},getSnowDiv:function(){return o.default.doc.querySelector("div.weather-animation.weather-snow")}},f={play:!0,k:function(e,t,a){e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent&&e.attachEvent("on"+t,a)},g:function(e){if("function"!=typeof window.onload)window.onload=e;else{var t=window.onload;window.onload=function(){t(),e()}}},h:function(){var e={};for(var t in{Top:"",Left:""}){var a="Top"==t?"Y":"X";"undefined"!=typeof window["page"+a+"Offset"]?e[t.toLowerCase()]=window["page"+a+"Offset"]:(a=document.documentElement.clientHeight?document.documentElement:document.body,e[t.toLowerCase()]=a["scroll"+t])}return e},l:function(){var e,t=document.querySelector("div.weather-animation");return window.innerHeight?e=window.innerHeight:t.parentElement.clientHeight?e=t.parentElement.clientHeight:t&&t.clientHeight&&(e=t.clientHeight),e},i:function(e){this.parent=o.default.doc.querySelector("div.weather-animation"),this.parent&&(this.createEl(this.parent,e),this.size=5*Math.random()+5,this.el.style.width=Math.round(this.size)+"px",this.el.style.height=Math.round(this.size)+"px",this.maxLeft=o.default.doc.querySelector("div.weather-animation").offsetWidth-this.size,this.maxTop=o.default.doc.querySelector("div.weather-animation").offsetHeight-this.size,this.left=Math.random()*this.maxLeft,this.top=0,this.angle=1.4+.2*Math.random(),this.minAngle=1.4,this.maxAngle=1.6,this.angleDelta=.01*Math.random(),this.speed=2+Math.random())},f:!0,destorySnow:function(){s&&clearInterval(s)},createSnow:function(e,t){var a=[];s&&clearInterval(s),s=setInterval(function(){var l=r.getSnowDiv();if(l||clearInterval(s),f.f&&t>a.length&&Math.random()<.005*t){var n=new f.i(e);n.parent?a.push(n):clearInterval(s)}f.f||a.length||clearInterval(s);for(var o=document.querySelector("div.weather-animation"),d=f.h().top,u=f.l(),i=a.length-1;o&&i>=0;i--)a[i]&&(a[i].top>o.offsetHeight-10||a[i].top+a[i].size+1>d+u?(a[i].top=0,a[i].left=Math.random()*a[i].maxLeft,a[i].setSrc()):(a[i].move(),a[i].draw()))},40),f.k(window,"scroll",function(){for(var e=a.length-1;e>=0;e--)a[e].draw()})}};f.i.prototype={createEl:function(e,t){this.el=document.createElement("img"),this.setSrc(),this.el.style.position="absolute",this.el.style.display="block",this.el.style.zIndex="99999",this.el.className="no-lazyload",this.parent.appendChild(this.el)},setSrc:function(){var e=i[Math.floor(4*Math.random())],t=e.getAttribute("src")||e.getAttribute("data-src");t&&this.el.setAttribute("src",t)},move:function(){(this.angle<this.minAngle||this.angle>this.maxAngle)&&(this.angleDelta=-this.angleDelta),this.angle+=this.angleDelta,this.left+=this.speed*Math.cos(this.angle*Math.PI),this.top-=this.speed*Math.sin(this.angle*Math.PI),this.left<0?this.left=this.maxLeft:this.left>this.maxLeft&&(this.left=0)},draw:function(){this.el.style.top=Math.round(this.top)+"px",this.el.style.left=Math.round(this.left)+"px"},remove:function(){this.el.parentNode&&this.parent.removeChild(this.el),this.parent=this.el=null}},a.default=r},{"../common/const.js":2,"../common/env.js":3,"./utils.js":15}],13:[function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t){return h.default.client.type.isAndroid?void(window.WizNote&&window.WizNote.saveFakeCookie&&window.WizNote.saveFakeCookie(t)):void localStorage.setItem(e,t)}function o(e,t){return h.default.client.type.isAndroid?void(window.WizNote&&window.WizNote.prepareCookie&&(window.getFakeCookie=function(e){t(e),window.getFakeCookie=null},window.WizNote.prepareCookie())):void t(localStorage.getItem(e))}function d(e){return S.default.hasClass(e,g.default.Class.Sudoku.grid)||S.default.hasClass(e,g.default.Class.Sudoku.indexBtn)||S.default.hasClass(e,g.default.Class.Sudoku.nextBtn)||S.default.hasClass(e,g.default.Class.Sudoku.previousBtn)}function u(e,t){var a=h.default.doc.querySelector("."+g.default.Class.Sudoku.nextBtn),l=h.default.doc.querySelector("."+g.default.Class.Sudoku.previousBtn);if("next"===t&&e===e.parentNode.lastChild)return void S.default.addClass(a,"unenable");if("previous"===t&&e===e.parentNode.firstChild)return void S.default.addClass(l,"unenable");var o="next"===t?e.nextElementSibling:e.previousElementSibling;o!==o.parentNode.firstChild?("previous"===t&&S.default.addClass(o.previousElementSibling,"previous"),S.default.removeClass(l,"unenable")):S.default.addClass(l,"unenable"),o!==o.parentNode.lastChild?("next"===t&&S.default.addClass(o.nextElementSibling,"next"),S.default.removeClass(a,"unenable")):S.default.addClass(a,"unenable"),S.default.addClass(e,"next"===t?"previous":"next"),S.default.addClass(o,g.default.Class.Active),f(o.querySelector(".quadrant-content")),n("sudoku-active-grid",o.className.substr(12,5)),e.previousElementSibling&&S.default.removeClass(e.previousElementSibling,"previous"),e.nextElementSibling&&S.default.removeClass(e.nextElementSibling,"next"),S.default.removeClass(e,g.default.Class.Active),S.default.stopEvent(event)}function i(e){var t,a=e.target||e.srcElement,l=S.default.getParentByFilter(a,d),o=h.default.doc.querySelector("."+g.default.Class.Sudoku.nextBtn),i=h.default.doc.querySelector("."+g.default.Class.Sudoku.previousBtn);if(!l)return void r();if(!h.default.doc.querySelector(".wiz-template-floatLayer.active")){if(S.default.hasClass(l,g.default.Class.Sudoku.grid)&&!S.default.hasClass(h.default.doc.body,g.default.Class.Sudoku.indexHide))return void s(l);t=h.default.doc.querySelector("."+g.default.Class.Sudoku.content+" .active"),t&&(S.default.hasClass(l,g.default.Class.Sudoku.indexBtn)?(m(),o&&S.default.removeClass(o,"unenable"),i&&S.default.removeClass(i,"unenable"),S.default.removeClass(h.default.doc.body,g.default.Class.Sudoku.indexHide),r(),n("sudoku-active-grid",""),h.default.doc.querySelector("body.for-quadrant")&&S.default.removeClass(h.default.doc.body,"animation")):S.default.hasClass(l,g.default.Class.Sudoku.nextBtn)?u(t,"next"):S.default.hasClass(l,g.default.Class.Sudoku.previousBtn)&&u(t,"previous"))}}function s(e){if(e&&!S.default.hasClass(h.default.doc.body,g.default.Class.Sudoku.indexHide)){var t=h.default.doc.querySelector("."+g.default.Class.Sudoku.nextBtn),a=h.default.doc.querySelector("."+g.default.Class.Sudoku.previousBtn);if(h.default.client.type.isAndroid||h.default.client.type.isIOS)h.default.doc.body.scrollTop=0,S.default.addClass(h.default.doc.body,g.default.Class.Sudoku.indexHide),S.default.addClass(e,g.default.Class.Active),e.previousElementSibling?(S.default.addClass(e.previousElementSibling,"previous"),S.default.removeClass(a,"unenable")):S.default.addClass(a,"unenable"),e.nextElementSibling?(S.default.addClass(e.nextElementSibling,"next"),S.default.removeClass(t,"unenable")):S.default.addClass(t,"unenable"),n("sudoku-active-grid",e.className.substr(12,5)),h.default.doc.querySelector("body.for-quadrant")&&setTimeout(function(){S.default.addClass(h.default.doc.body,"animation")},200);else if(!y){if(S.default.hasClass(e,w.isEditing))return;r(),m(),p(),S.default.addClass(e,w.gridEdit),S.default.addClass(e,w.isEditing)}f(e.querySelector(".quadrant-content"))}}function r(){var e=h.default.doc.querySelectorAll(".quadrant-content");if(e.length)for(var t=0,a=e.length;t<a;t++)e[t].textContent.trim()||e[t].querySelector("img")?S.default.addClass(e[t].parentNode,w.gridEdit):S.default.hasClass(e[t].parentNode,w.gridEdit)&&(S.default.removeClass(e[t].parentNode,w.gridEdit),S.default.removeClass(e[t].parentNode,w.isEditing))}function f(e){e&&setTimeout(function(){e.focus();var t=h.default.doc.getSelection();
t.collapse(e,e.childNodes.length)},300)}function c(e){if(e){var t=h.default.doc.querySelector("."+e);S.default.removeClass(h.default.doc.body,g.default.Class.Sudoku.indexHide),s(t)}else S.default.removeClass(h.default.doc.body,"sudoku-index-hide")}function m(){var e=h.default.doc.querySelectorAll("."+g.default.Class.Sudoku.grid);if(e.length)for(var t=0,a=e.length;t<a;t++)S.default.removeClass(e[t],g.default.Class.Active),S.default.removeClass(e[t],"previous"),S.default.removeClass(e[t],"next"),S.default.removeClass(e[t],w.isEditing)}function p(){o("sudoku-active-grid",c)}a.__esModule=!0;var y,C=e("../common/env.js"),h=l(C),v=e("../common/const.js"),g=l(v),b=e("./utils.js"),S=l(b),w={gridEdit:"quadrant-content-edit",isEditing:"editing"},T={on:function(e){y=e,T.off();var t=h.default.doc.querySelector("."+g.default.Class.Sudoku.content);if(t){S.default.bind(h.default.doc.body,"click",i),r(),h.default.doc.body.scrollTop=0;var a=h.default.doc.querySelector("#wiz-template-info").getAttribute("data-newnote");e?n("sudoku-active-grid",""):a&&(n("sudoku-active-grid",""),h.default.doc.querySelector("#wiz-template-info").removeAttribute("data-newnote")),m(),p()}},off:function(){S.default.unbind(h.default.doc.body,"click",i)}};a.default=T},{"../common/const.js":2,"../common/env.js":3,"./utils.js":15}],14:[function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var n=e("../common/const.js"),o=l(n),d=e("../common/env.js"),u=l(d),i={on:function(){var e,t,a=u.default.doc.querySelectorAll("."+o.default.Class.TodoImg);if(a)for(var l=0,n=a.length;l<n;l++){e=["wiz_todo"],t=[];for(var d=0;d<6;d++)t.push(Math.floor(10*Math.random()));e.push((new Date).getTime()+l),e.push(t.join("")),e.push(u.default.doc.getElementById(o.default.Id.TemplateInfo).getAttribute("data-templatename")),a[l].id||(a[l].id=e.join("_"))}},off:function(){}};a.default=i},{"../common/const.js":2,"../common/env.js":3}],15:[function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var n=e("../common/const.js"),o=l(n),d=e("../common/env.js"),u=l(d),i={bind:function(e,t,a){e&&(e.addEventListener?e.addEventListener(t,a,!1):(e["e"+a]=function(){a.call(e,window.event)},e.attachEvent("on"+t,e["e"+a])))},unbind:function(e,t,a){e&&(e.removeEventListener?e.removeEventListener(t,a,!1):e.detachEvent&&e.detachEvent("on"+t,e["e"+a]))},getTemplateElements:function(){return u.default.doc.querySelectorAll("."+o.default.Class.Common)},hasClass:function(e,t){if(e)return(" "+e.className+" ").indexOf(" "+t+" ")>-1},addClass:function(e,t){i.hasClass(e,t)||e&&(e.className=i.trim(e.className+" "+t))},removeClass:function(e,t){e&&(e.className=i.trim((" "+e.className+" ").replace(" "+t+" "," ")))},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},stopEvent:function(e){e.stopPropagation(),e.preventDefault()},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},getParentByFilter:function(e,t){if(!t)return e;if(e&&e!=u.default.doc.body)for(;e;){if(t(e))return e;if(e==u.default.doc.body)return null;e=e.parentNode}return null},getTemplateRange:function(){var e=document.getSelection();if(!e.rangeCount)return null;var t=e.getRangeAt(0);return{start:t.startContainer,startOffset:t.startOffset,end:t.endContainer,endOffset:t.endOffset}},setTemplateRange:function(e){if(e){var t=document.getSelection();t.collapse(e.start,e.startOffset),t.extend(e.end,e.endOffset)}},modifyHtmlForPC:function(){if(u.default.client.type.isWin){var e=u.default.doc.createElement("div");e.setAttribute("name",o.default.NAME.TMP_STYLE),e.setAttribute("style","display:none"),u.default.doc.body.appendChild(e)}}};a.default=i},{"../common/const.js":2,"../common/env.js":3}]},{},[1]);